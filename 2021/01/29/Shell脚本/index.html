<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <title>
        Shell脚本 |
        
        A.M.|P.M.
    </title>
    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.png","favicon":"/images/logo.svg","img_position":"left","left_side_width":"260px","content_max_width":"900px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."}},"local_search":{"enable":true,"trigger":"auto","unescape":false,"preload":true},"version":"3.0.4"};
    KEEP.language = {"search":"Search...","prev":"Prev","next":"Next","prev_posts":"Prev posts","next_posts":"Next posts","page":"Page %d","recent_posts":"Recent Posts","share":"Share","powered_by":"Powered by %s","theme":"Theme","rss_feed":"RSS Feed","category":"Category","categories":"Categories","tag":"Tag","tags":"Tags","tagcloud":"Tag Cloud","comment":"Comment","home":"Home","archive":"Archive","archives":"Archives","about":"About","site_uv":"Visitor Count","site_pv":"Totalview","links":"Links","link":"Link","top":"TOP","read_more":"Read more","wordcount":"Words","min2read":"Mins","changelog":"Changelog","copyright":{"author":"Post author","title":"Post title","link":"Post link","create_time":"Create time","license_title":"Copyright Notice","license_content":"All articles in this blog are licensed under %s unless stating additionally."},"ago":{"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days age","week":"%s weeks age","month":"%s months age","year":"%s years age"}};
  </script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
<div class="page-container">

    

    <header class="page-header">
        <div class="header-progress"></div>
    </header>

    <main class="page-main">

        <div class="page-main-content">

            <div class="page-main-content-top">
                <header class="header-wrapper">

    <div class="header-content">
        <a class="logo-title" href="/">
            A.M.|P.M.
        </a>

        <ul class="menu-list">
            
                <li class="menu-item">
                    <a class=""
                       href="/"
                    >
                        HOME
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/archives"
                    >
                        ARCHIVES
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/categories"
                    >
                        CATEGORIES
                    </a>
                </li>
            
        </ul>

        <div class="menu-bar">
            <div class="menu-bar-middle"></div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


            </div>

            <div class="page-main-content-middle">

                <main class="main-content normal-code-theme">

                    
                        <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Shell脚本</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span>John_Frod</span>
                        <span class="level">Lv3</span>
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-calendar"></i> 2021-01-29 22:01:18
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>
            <ul>
                
                    <li>
                        <a href="/categories/%E5%90%8E%E7%AB%AF/">后端</a>
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>
            <ul>
                
                    <li>
                        <a href="/tags/Shell/">Shell</a>
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i> <span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h2 id="一、shell介绍"><a href="#一、shell介绍" class="headerlink" title="一、shell介绍"></a>一、shell介绍</h2><ul>
<li>什么是shell</li>
<li>shell功能</li>
</ul>
<hr>
<h3 id="1-什么是shell"><a href="#1-什么是shell" class="headerlink" title="1.什么是shell"></a>1.什么是shell</h3><p>shell是一个程序，采用C语言编写，是用户和Linux内核沟通的桥梁。它既是一种命令语言，又是一种解释性的编程语言。通过一个图标来查看以下设立了的作用</p>
<p><img src="https://raw.githubusercontent.com/JOHN-FROD/PicGo/main/blog-img/00_shell%E4%BB%8B%E7%BB%8D.png"></p>
<blockquote>
<p><strong>扩展知识</strong></p>
<p>kernel（内核）：为软件服务，接收用户或软件指令驱动硬件，完成工作；</p>
<p>shell：命令解释器</p>
<p>user：用户接口，对接用户</p>
</blockquote>
<p>从上图可以看出，shell在操作系统中起到了承接用户和系统内核的作用。那为什么步直接用户对内核呢？</p>
<p>原因很简单，因为内核处理的都是二进制，而用户处理的都是高级语言。简而言之，如果没有shell，你希望告诉你喜欢的妹子：我爱你。你需要经过以下步骤：</p>
<ol>
<li>将“我爱你”翻译成二进制</li>
<li>告诉内核</li>
<li>内核通过网卡发送给你的妹子</li>
<li>妹子计算机网卡收到你发的二进制</li>
<li>网卡交给内核</li>
<li>内核交给妹子</li>
<li>妹子看到都是一串01组成的数字，o my god，二进制不是人人都懂的，你的表白也就石沉大海了。</li>
</ol>
<p>为了让所有人都能够快速、方便地使用计算机，我们打的系统开发人员通过shell解决了这个问题。使任何一个希望通过计算机来工作、娱乐的人都能够快速操作计算机。</p>
<h3 id="2-shell功能"><a href="#2-shell功能" class="headerlink" title="2. shell功能"></a>2. shell功能</h3><ul>
<li>命令行解释功能</li>
<li>启动程序</li>
<li>输入输出重定向</li>
<li>管道连接</li>
<li>文件名置换(echo /*)</li>
<li>变量维护</li>
<li>环境控制</li>
<li>shell编程</li>
</ul>
<h2 id="二、shell语法"><a href="#二、shell语法" class="headerlink" title="二、shell语法"></a>二、shell语法</h2><ul>
<li>如何书写一个shell脚本</li>
<li>shell脚本运行</li>
<li>shell中的特殊符号</li>
<li>管道</li>
<li>重定向</li>
<li>shell中数学运算</li>
<li>脚本退出</li>
</ul>
<hr>
<p>**shell脚本就是将完成一个任务的所有命令按照执行的先后顺序，自上而下写入到一个文本文件中，然后给予执行权限。</p>
<h3 id="1-如何书写一个shell脚本"><a href="#1-如何书写一个shell脚本" class="headerlink" title="1.如何书写一个shell脚本"></a>1.如何书写一个shell脚本</h3><p>shell脚本的命名：</p>
<p>名字要有意义，最好不要用a、b、c、d、1、2、3、4这中方式命名；虽然在linux系统中，文件没有扩展名的概念，依然建议你用.sh结尾；名字不要太长，最好能在30个字节以内解决。例如check_memory.sh</p>
<p>shell脚本格式：</p>
<p>shell脚本开头必须指定脚本运行环境，以<code>#!</code>这个特殊符号组合了组成。如： #!/bin/bash 指定该脚本是运行解析由/bin/bash来完成的：</p>
<p>shell中的注释使用<code>#</code>号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shell脚本中，最好加入脚本说明字段</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Author: xxx</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Created Time: xxxx/xx/xx xx:xx</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Release:1.0</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Script Description: first shell study script</span></span><br></pre></td></tr></table></figure>


<h3 id="2-如何运行一个shell脚本"><a href="#2-如何运行一个shell脚本" class="headerlink" title="2.如何运行一个shell脚本"></a>2.如何运行一个shell脚本</h3><p>脚本运行需要执行权限，当我们给一个文件赋予执行权限后，该脚本就可以运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+x filename</span><br></pre></td></tr></table></figure>
<p>如果不希望赋予脚本执行权限，那么可以使用bash命令来运行未给予执行权限的脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash filename</span><br></pre></td></tr></table></figure>


<h3 id="3-shell中的特殊符号"><a href="#3-shell中的特殊符号" class="headerlink" title="3. shell中的特殊符号"></a>3. shell中的特殊符号</h3><table>
<thead>
<tr>
<th align="center">符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">~</td>
<td>家目录        # cd ~ 代表进入用户家目录</td>
</tr>
<tr>
<td align="center">!</td>
<td>执行历史命令            ~~执行上一条命令</td>
</tr>
<tr>
<td align="center">$</td>
<td>变量中取内容符</td>
</tr>
<tr>
<td align="center">+ - * / %</td>
<td>对应数学运算    加 减 乘 除 取余</td>
</tr>
<tr>
<td align="center">&amp;</td>
<td>后台执行</td>
</tr>
<tr>
<td align="center">*</td>
<td>型号是shell中的通配符，匹配所有</td>
</tr>
<tr>
<td align="center">?</td>
<td>问号是shell中的通配符，匹配除回车以外的一个字符</td>
</tr>
<tr>
<td align="center">;</td>
<td>分号可以在shell中一行执行多个命令，命令hi加用分号分隔</td>
</tr>
<tr>
<td align="center">|</td>
<td>管道符，上一个命令的输出作为下一个命令的输入    cat filename | grep “abc”</td>
</tr>
<tr>
<td align="center">\</td>
<td>转义字符</td>
</tr>
<tr>
<td align="center">``</td>
<td>反引号 命令中执行命令        echo “today is /<code>date +%F/</code>”</td>
</tr>
<tr>
<td align="center">‘ ‘</td>
<td>单引号，脚本中字符串要用单引号引起来，但不同于双引号的是，单引号不解释变量</td>
</tr>
<tr>
<td align="center">“ “</td>
<td>双引号，脚本中出现的字符串可以用双引号引起来</td>
</tr>
</tbody></table>
<h3 id="4-shell中管道的运用"><a href="#4-shell中管道的运用" class="headerlink" title="4. shell中管道的运用"></a>4. shell中管道的运用</h3><p>|  管道符在shell中使用是最多的，很多组合命令都需要通过组合命令来完成输出。管道符其实就是下一个命令对上一个命令的输出做处理。</p>
<h3 id="5-shell重定向"><a href="#5-shell重定向" class="headerlink" title="5. shell重定向"></a>5. shell重定向</h3><ol>
<li>&gt;    重定向输入  覆盖原数据</li>
<li>&gt;&gt;  重定向追加输入，在原数据的末尾添加</li>
<li>&lt;    重定向输出     wc -l &lt; /etc/passwd</li>
<li>&lt;&lt;  重定向追加输出  fdisk /dev/sdb &lt;</li>
</ol>
<h3 id="6-shell数学运算"><a href="#6-shell数学运算" class="headerlink" title="6. shell数学运算"></a>6. shell数学运算</h3><p>expr 命令：只能做整数运算，格式比较古板，注意空格</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">expr 1 + 1</span><br><span class="line">expr 5 - 2</span><br><span class="line">expr 5 \* 2</span><br><span class="line">expr 5 / 2</span><br><span class="line">expr 5 % 2</span><br></pre></td></tr></table></figure>
<p>使用bc计算器处理浮点运算，sacle=2代表小数点保留两位</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;scale=2;3+100&quot;|bc</span><br><span class="line">echo &quot;scale=2;100-3&quot;|bc</span><br><span class="line">echo &quot;scale=2;100/3&quot;|bc</span><br><span class="line">echo &quot;scale=2;100*3&quot;|bc</span><br></pre></td></tr></table></figure>
<p>双小圆括号运算，在shell中(())也可以用来做数学运算</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> $(( <span class="number">100</span>+<span class="number">3</span>))</span><br><span class="line"><span class="keyword">echo</span> $(( <span class="number">100</span><span class="number">-3</span>)) </span><br><span class="line"><span class="keyword">echo</span> $(( <span class="number">100</span>%<span class="number">3</span>))</span><br><span class="line"><span class="keyword">echo</span> $(( <span class="number">100</span>*<span class="number">3</span>))</span><br><span class="line"><span class="keyword">echo</span> $(( <span class="number">100</span>/<span class="number">3</span>))</span><br><span class="line"><span class="keyword">echo</span> $(( <span class="number">100</span>**<span class="number">3</span>))		<span class="comment">//开方运算    </span></span><br></pre></td></tr></table></figure>


<h3 id="7-退出脚本"><a href="#7-退出脚本" class="headerlink" title="7.退出脚本"></a>7.退出脚本</h3><p>exit NUM：退出脚本，释放系统资源，NUM代表一个整数，代表返回值。</p>
<h2 id="三、shell格式化输出"><a href="#三、shell格式化输出" class="headerlink" title="三、shell格式化输出"></a>三、shell格式化输出</h2><ul>
<li>echo命令</li>
<li>颜色输出</li>
</ul>
<hr>
<p><strong>一个程序需要有0个或以上输入，一个或更多输出</strong></p>
<h3 id="1-echo命令介绍"><a href="#1-echo命令介绍" class="headerlink" title="1. echo命令介绍"></a>1. echo命令介绍</h3><p>echo命令的功能是在显示器上显示一段文字，一般起到一个提示的作用。 该命令的一般格式为:echo [ -n ]字符串</p>
<p>其中选项n表示输出文字后不换行;字符串能加引号，也能不加引号。用echo命令输出加引号的字符串时，将字符串原样输出;用echo命令输出不加引号的字符串时，将字符串中的各个单词作为字符串输出，各字符串之间用一个空格分割。</p>
<p>功能说明:显示文字。</p>
<p>语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo [-ne][字符串]	</span><br><span class="line">echo [--help][--version] </span><br></pre></td></tr></table></figure>
<p>补充说明：echo会将输入的字符串送往标准输出。输出的字符串间以空白字符隔开,并在最后加上换行号。</p>
<p>命令选项：</p>
<p>-n：不要在最后自动换行；</p>
<p>-e：若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出:</p>
<p>​    转义字符：</p>
<table>
<thead>
<tr>
<th align="center">转义字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\a</td>
<td>发出警告声</td>
</tr>
<tr>
<td align="center">\b</td>
<td>删除前一个字符</td>
</tr>
<tr>
<td align="center">\c</td>
<td>最后不加上换行符号</td>
</tr>
<tr>
<td align="center">\f</td>
<td>换行但光标仍旧停留在原来的位置</td>
</tr>
<tr>
<td align="center">\n</td>
<td>换行且光标移至行首</td>
</tr>
<tr>
<td align="center">\r</td>
<td>光标移至行首，但不换行</td>
</tr>
<tr>
<td align="center">\t</td>
<td>插入tab</td>
</tr>
<tr>
<td align="center">\v</td>
<td>与\f相同</td>
</tr>
<tr>
<td align="center">\\</td>
<td>插入\字符</td>
</tr>
<tr>
<td align="center">\nnn</td>
<td>插入nnn(八进制)所代表的ASCII字符</td>
</tr>
</tbody></table>
<p>举例：输出一个菜单</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo -e &quot;\t\t\t\tFruit Shop&quot;</span><br><span class="line">echo -e &quot;\t1) Apple&quot;</span><br><span class="line">echo -e &quot;\t2) Orange&quot;</span><br><span class="line">echo -e &quot;\t3) Banana&quot;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">			Fruit Shop</span><br><span class="line">1) Apple</span><br><span class="line">2) Orange</span><br><span class="line">3) Banana</span><br></pre></td></tr></table></figure>


<h3 id="2-颜色代码"><a href="#2-颜色代码" class="headerlink" title="2.颜色代码"></a>2.颜色代码</h3><p>脚本中echo显示内容带颜色显示,echo显示带颜色，需要使用参数-e</p>
<p>格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e “\033[字背景颜色；文字颜色m字符串\033[0m”</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e “\033[41;36m something here \033[0m”</span><br></pre></td></tr></table></figure>
<ol>
<li><p>字背景颜色和文字颜色之间是英文的””</p>
</li>
<li><p>文字颜色后面有个m</p>
</li>
<li><p>字符串前后可以没有空格，如果有的话，输出也是同样有空格</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">下面是相应的字和背景颜色，可以自己来尝试找出不同颜色搭配</span><br><span class="line">　　例</span><br><span class="line">　　echo -e “\033[31m 红色字 \033[0m”</span><br><span class="line">　　echo -e “\033[34m 黄色字 \033[0m”</span><br><span class="line">　　echo -e “\033[41;33m 红底黄字 \033[0m”</span><br><span class="line">　　echo -e “\033[41;37m 红底白字 \033[0m”</span><br><span class="line">　　</span><br><span class="line">字颜色：30—–37</span><br><span class="line">　　echo -e “\033[30m 黑色字 \033[0m”</span><br><span class="line">　　echo -e “\033[31m 红色字 \033[0m”</span><br><span class="line">　　echo -e “\033[32m 绿色字 \033[0m”</span><br><span class="line">　　echo -e “\033[33m 黄色字 \033[0m”</span><br><span class="line">　　echo -e “\033[34m 蓝色字 \033[0m”</span><br><span class="line">　　echo -e “\033[35m 紫色字 \033[0m”</span><br><span class="line">　　echo -e “\033[36m 天蓝字 \033[0m”</span><br><span class="line">　　echo -e “\033[37m 白色字 \033[0m”</span><br><span class="line">　　</span><br><span class="line">字背景颜色范围：40—–47</span><br><span class="line">　　echo -e “\033[40;37m 黑底白字 \033[0m”</span><br><span class="line">　　echo -e “\033[41;37m 红底白字 \033[0m”</span><br><span class="line">　　echo -e “\033[42;37m 绿底白字 \033[0m”</span><br><span class="line">　　echo -e “\033[43;37m 黄底白字 \033[0m”</span><br><span class="line">　　echo -e “\033[44;37m 蓝底白字 \033[0m”</span><br><span class="line">　　echo -e “\033[45;37m 紫底白字 \033[0m”</span><br><span class="line">　　echo -e “\033[46;37m 天蓝底白字 \033[0m”</span><br><span class="line">　　echo -e “\033[47;30m 白底黑字 \033[0m”</span><br><span class="line">　　</span><br><span class="line">最后面控制选项说明</span><br><span class="line">　　\033[0m 关闭所有属性</span><br><span class="line">　　\033[1m 设置高亮度</span><br><span class="line">　　\033[4m 下划线</span><br><span class="line">　　\033[5m 闪烁</span><br><span class="line">　　\033[7m 反显</span><br><span class="line">　　\033[8m 消隐</span><br><span class="line">　　\033[30m — \33[37m </span><br><span class="line">设置前景色</span><br><span class="line">　　\033[40m — \33[47m 设置背景色</span><br><span class="line">　　\033[nA 光标上移n行</span><br><span class="line">　　\033[nB 光标下移n行</span><br><span class="line">　　\033[nC 光标右移n行</span><br><span class="line">　　\033[nD 光标左移n行</span><br><span class="line">　　\033[y;xH设置光标位置</span><br><span class="line">　　\033[2J 清屏</span><br><span class="line">　　\033[K 清除从光标到行尾的内容</span><br><span class="line">　　\33[s 保存光标位置</span><br><span class="line">　　\033[u 恢复光标位置</span><br><span class="line">　　\033[?25l 隐藏光标</span><br><span class="line">　　\033[?25h 显示光标</span><br></pre></td></tr></table></figure>


<h2 id="四、shell基本输入"><a href="#四、shell基本输入" class="headerlink" title="四、shell基本输入"></a>四、shell基本输入</h2><ul>
<li>read命令</li>
</ul>
<hr>
<h3 id="1-read命令"><a href="#1-read命令" class="headerlink" title="1. read命令"></a>1. read命令</h3><p>默认接受键盘的输入，回车符代表输入结束</p>
<table>
<thead>
<tr>
<th align="center">read 命令选项</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-p</td>
<td>打印信息</td>
</tr>
<tr>
<td align="center">-t</td>
<td>限定时间</td>
</tr>
<tr>
<td align="center">-s</td>
<td>不回显</td>
</tr>
<tr>
<td align="center">-n</td>
<td>输入字符个数</td>
</tr>
</tbody></table>
<h2 id="五、shell变量"><a href="#五、shell变量" class="headerlink" title="五、shell变量"></a>五、shell变量</h2><ul>
<li>变量介绍</li>
<li>变量分类</li>
<li>变量管理</li>
</ul>
<hr>
<h3 id="1-变量介绍"><a href="#1-变量介绍" class="headerlink" title="1.变量介绍"></a>1.变量介绍</h3><ol>
<li> 在编程中，我们总有一些数据需要临时存放在内存，以待后续使用时快速读出。内存在系统启动的时候被按照1B一个单位划分为若干个块，然后统一</li>
<li> 编号(16进制编号)，并对内存的使用情况做记录，保存在内存跟踪表中。</li>
</ol>
<p>变量：变量是编程中最常用的一种临时在内存中存取数据的一种方式。</p>
<p><img src="https://raw.githubusercontent.com/JOHN-FROD/PicGo/main/blog-img/kcxvft.png" alt="img"></p>
<p>从图片可以看出，当我们在脚本中定义变量存值的时候，可以从以下方面看到变化：</p>
<ol>
<li><p>内存占用：如果存的是一个字符则占用1个字节，如果存的是字符串则是字符串的长度加1个字节长度(\0是一个特殊字符，代表字符串结束)。</p>
</li>
<li><p>变量名与内存空间关系：计算机中会将对应的内存空间和变量名称绑定在一起，此时代表这段内存空间已经被程序占用，其他程序不可复用；然后将变量名对应的值存在对应内存地址的空间里。</p>
</li>
</ol>
<h3 id="2-变量分类"><a href="#2-变量分类" class="headerlink" title="2.变量分类"></a>2.变量分类</h3><ol>
<li>本地变量：用户私有变量，只有本用户可以使用，保存在家目录下的.bash_profile、.bashrc文件中</li>
<li>全局变量：所有用户都可以使用，保存在/etc/profile、/etc/bashrc文件中</li>
<li>用户自定义变量：用户自定义，比如脚本中的变量</li>
</ol>
<h3 id="3-定义变量"><a href="#3-定义变量" class="headerlink" title="3.定义变量"></a>3.定义变量</h3><h4 id="3-1定义变量"><a href="#3-1定义变量" class="headerlink" title="3.1定义变量"></a>3.1定义变量</h4><p>变量格式：<code>变量名=值</code></p>
<p><strong>在shell编程中的变量名和等号之间不能有空格</strong></p>
<p>变量命名规则：</p>
<ol>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">VAR1=1</span><br><span class="line"></span><br><span class="line">age=18</span><br><span class="line"></span><br><span class="line">name=&#x27;baism&#x27;</span><br><span class="line"></span><br><span class="line">score=88.8</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：字符串要用单引号或双引号引起来</p>
<h4 id="3-2读取变量内容"><a href="#3-2读取变量内容" class="headerlink" title="3.2读取变量内容"></a>3.2读取变量内容</h4><p>读取变量内容符:<code>$</code></p>
<p>读取方法：<code>$变量名</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo $name</span><br><span class="line">echo $school</span><br><span class="line">echo $age</span><br><span class="line">echo $score</span><br></pre></td></tr></table></figure>
<h4 id="3-3取消变量unset"><a href="#3-3取消变量unset" class="headerlink" title="3.3取消变量unset"></a>3.3取消变量unset</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unset name</span><br><span class="line">echo $name</span><br></pre></td></tr></table></figure>
<h4 id="3-4定义全局变量export"><a href="#3-4定义全局变量export" class="headerlink" title="3.4定义全局变量export"></a>3.4定义全局变量export</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export name=&#x27;Tom&#x27;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：</p>
<ol>
<li><p>上述设置的变量其实都是一次性变量，系统重启就会丢失。</p>
</li>
<li><p>如果希望本地变量或者全局变量可以永久使用，可以将需要设置的变量写入变量文件中即可。</p>
</li>
</ol>
<h4 id="3-5定义永久变量"><a href="#3-5定义永久变量" class="headerlink" title="3.5定义永久变量"></a>3.5定义永久变量</h4><p>本地变量：用户私有变量，只有本用户可以使用，保存在家目录下的.bash_profile、.bashrc文件中</p>
<p>全局变量：所有用户都可以使用，保存在/etc/profile、/etc/bashrc文件中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">本地变量</span></span><br><span class="line">tail -1 ~/.bash_profile</span><br><span class="line">name=&#x27;baism&#x27;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">全局变量</span></span><br><span class="line">tail -1 /etc/profile</span><br><span class="line">export age=30</span><br></pre></td></tr></table></figure>


<h2 id="六、shell数组"><a href="#六、shell数组" class="headerlink" title="六、shell数组"></a>六、shell数组</h2><ul>
<li>数组介绍</li>
<li>基本数组</li>
<li>关联数组</li>
<li>案列分享</li>
</ul>
<hr>
<h3 id="1-数组介绍"><a href="#1-数组介绍" class="headerlink" title="1.数组介绍"></a>1.数组介绍</h3><p>一个变量只能存一个值，但是现实中又又很多值需要存储，那么变量就有些拘谨了。比如做一个学员信息表，一个班50个人，每个人6条信息，我们需要定义300个变量才能完成。恐怖恐怖，这只是一个班的学生，一个学校呢？一个市呢？……我想静静了！</p>
<p>仔细想想上述的案例，一个学生六个信息:ID、姓名、性别、年龄、成绩、班级。可不可以定义六个变量就能存储这六类信息呢？答案是当然可以的！变量不行，我们就用数组。</p>
<h3 id="2-基本数组"><a href="#2-基本数组" class="headerlink" title="2.基本数组"></a>2.基本数组</h3><p>数组可以让用户一次赋予多个值，需要读取数据时只需通过索引调用就可以方便读出了。</p>
<h4 id="2-1数组语法"><a href="#2-1数组语法" class="headerlink" title="2.1数组语法"></a>2.1数组语法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数组名称=(元素1 元素2 元素3 ...)</span><br></pre></td></tr></table></figure>
<h4 id="2-2数组读出"><a href="#2-2数组读出" class="headerlink" title="2.2数组读出"></a>2.2数组读出</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">&#123;数组名称[索引]&#125;</span></span><br></pre></td></tr></table></figure>
<p>索引默认是元素在数组中的排队编号，默认第一个从0开始</p>
<h4 id="2-3数组赋值"><a href="#2-3数组赋值" class="headerlink" title="2.3数组赋值"></a>2.3数组赋值</h4><p><strong>方法一：一次赋一个值</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array0[0]=&#x27;tom&#x27;</span><br><span class="line">array0[1]=&#x27;jarry&#x27;</span><br><span class="line">array0[2]=&#x27;natasha&#x27;</span><br></pre></td></tr></table></figure>
<p><strong>方法二： 一次赋多个值</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array2=(tom jack alice)</span><br><span class="line">array3=(cat /etc/passwd) 	#希望是将该文件中的每一个行作为一个元素赋值给数组array3</span><br><span class="line">array4=(ls /var/ftp/Shell/for*)</span><br><span class="line">array5=(tom jack alice “bash shell”)</span><br></pre></td></tr></table></figure>
<h4 id="2-4查看数组"><a href="#2-4查看数组" class="headerlink" title="2.4查看数组"></a>2.4查看数组</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">declare -a</span><br><span class="line">declare -a array1=&#x27;([0]=”pear” [1]=”apple” [2]=”orange” [3]=”peach”)&#x27;</span><br><span class="line">declare -a array2=&#x27;([0]=”tom” [1]=”jack” [2]=”alice”)&#x27;</span><br></pre></td></tr></table></figure>
<h4 id="2-5访问数组元素"><a href="#2-5访问数组元素" class="headerlink" title="2.5访问数组元素"></a>2.5访问数组元素</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;array1[0]&#125; 		#访问数组中的第一个元素</span><br><span class="line">echo $&#123;array1[@]&#125; 		#访问数组中所有元素 等同于 echo $&#123;array1[*]&#125;</span><br><span class="line">echo $&#123;#array1[@]&#125; 		#统计数组元素的个数</span><br><span class="line">echo $&#123;!array2[@]&#125; 		#获取数组元素的索引</span><br><span class="line">echo $&#123;array1[@]:1&#125; 	#从数组下标1开始</span><br><span class="line">echo $&#123;array1[@]:1:2&#125; 	#从数组下标1开始，访问两个元素</span><br></pre></td></tr></table></figure>
<h4 id="2-6遍历数组"><a href="#2-6遍历数组" class="headerlink" title="2.6遍历数组"></a>2.6遍历数组</h4><p>默认数组通过数组元素的个数进行遍历</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;ass_array2[index1]&#125;</span><br><span class="line">echo $&#123;ass_array2[index2]&#125;</span><br><span class="line">echo $&#123;ass_array2[index3]&#125;</span><br><span class="line">echo $&#123;ass_array2[index4]&#125;</span><br></pre></td></tr></table></figure>
<p>方法二： 针对关联数组可以通过数组元素的索引进行遍历</p>
<h3 id="3-关联数组"><a href="#3-关联数组" class="headerlink" title="3.关联数组"></a>3.关联数组</h3><p>关联数组可以允许用户自定义数组的索引，这样使用起来更加方便、高效。</p>
<h4 id="3-1定义关联数组"><a href="#3-1定义关联数组" class="headerlink" title="3.1定义关联数组"></a>3.1定义关联数组</h4><p>申明关联数组变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">declare -A ass_array1</span><br><span class="line">declare -A ass_array2</span><br></pre></td></tr></table></figure>
<h4 id="3-2关联数组赋值"><a href="#3-2关联数组赋值" class="headerlink" title="3.2关联数组赋值"></a>3.2关联数组赋值</h4><p><strong>方法一： 一次赋一个值</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">数组名[索引]=变量值</span><br><span class="line">ass_array1[index1]=pear</span><br><span class="line">ass_array1[index2]=apple</span><br><span class="line">ass_array1[index3]=orange</span><br><span class="line">ass_array1[index4]=peach</span><br></pre></td></tr></table></figure>
<p><strong>方法二： 一次赋多个值</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ass_array2=([index1]=tom [index2]=jack [index3]=alice [index4]=’bash shell’)</span><br></pre></td></tr></table></figure>
<h4 id="3-3查看数组"><a href="#3-3查看数组" class="headerlink" title="3.3查看数组"></a>3.3查看数组</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">declare -A</span><br><span class="line">declare -A ass_array1=’([index4]=”peach” [index1]=”pear” [index2]=”apple” [index3]=”orange” )’</span><br><span class="line">declare -A ass_array2=’([index4]=”bash shell” [index1]=”tom” [index2]=”jack” [index3]=”alice” )’</span><br></pre></td></tr></table></figure>
<h4 id="3-4访问数组元素"><a href="#3-4访问数组元素" class="headerlink" title="3.4访问数组元素"></a>3.4访问数组元素</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;ass_array2[index2]&#125; 		#访问数组中的第二个元数</span><br><span class="line">echo $&#123;ass_array2[@]&#125; 			#访问数组中所有元数 等同于 echo $&#123;array1[*]&#125;</span><br><span class="line">echo $&#123;#ass_array2[@]&#125; 			#获得数组元数的个数</span><br><span class="line">echo $&#123;!ass_array2[@]&#125; 			#获得数组元数的索引</span><br></pre></td></tr></table></figure>
<h4 id="3-5遍历数组"><a href="#3-5遍历数组" class="headerlink" title="3.5遍历数组"></a>3.5遍历数组</h4><p>通过数组元数的索引进行遍历,针对关联数组可以通过数组元素的索引进行遍历</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;ass_array2[index1]&#125;</span><br><span class="line">echo $&#123;ass_array2[index2]&#125;</span><br><span class="line">echo $&#123;ass_array2[index3]&#125;</span><br><span class="line">echo $&#123;ass_array2[index4]&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-案例分享——学员信息系统"><a href="#4-案例分享——学员信息系统" class="headerlink" title="4.案例分享——学员信息系统"></a>4.案例分享——学员信息系统</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for ((i=0;i&lt;3;i++))</span><br><span class="line">   do</span><br><span class="line">      read -p &quot;输入第$((i + 1))个人名: &quot; name[$i]</span><br><span class="line">      read -p &quot;输入第$[$i + 1]个年龄: &quot; age[$i]</span><br><span class="line">      read -p &quot;输入第`expr $i + 1`个性别: &quot; gender[$i]</span><br><span class="line">done</span><br><span class="line">clear</span><br><span class="line">      echo -e &quot;\t\t\t\t学员查询系统&quot;</span><br><span class="line">while :</span><br><span class="line">   do</span><br><span class="line">      cp=0</span><br><span class="line"><span class="meta">#</span><span class="bash">      <span class="built_in">echo</span> -e <span class="string">&quot;\t\t\t\t学员查询系统&quot;</span></span></span><br><span class="line">      read -p &quot;输入要查询的姓名: &quot; xm</span><br><span class="line">      [ $xm == &quot;Q&quot; ]&amp;&amp;exit</span><br><span class="line">      for ((i=0;i&lt;3;i++))</span><br><span class="line">         do</span><br><span class="line">              if [ &quot;$xm&quot; == &quot;$&#123;name[$i]&#125;&quot; ];then</span><br><span class="line">                  echo &quot;$&#123;name[$i]&#125; $&#123;age[$i]&#125; $&#123;gender[$i]&#125;&quot;</span><br><span class="line">                  cp=1</span><br><span class="line">              fi</span><br><span class="line">      done</span><br><span class="line">      [ $cp -eq 0 ]&amp;&amp;echo &quot;not found student&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h2 id="七、shell流程控制-if判断语句"><a href="#七、shell流程控制-if判断语句" class="headerlink" title="七、shell流程控制-if判断语句"></a>七、shell流程控制-if判断语句</h2><ul>
<li>shell中的五大运算</li>
<li>if语法</li>
</ul>
<hr>
<p>当我们在写程序的时候，时常对上一步执行是否成功如何判断苦恼，当我们今天学习了if就可以解决你的苦恼。if语句在我们程序中就是用来做判断的，以后大家不管学习什么语言，以后只要涉及到判断的部分，大家就可以直接拿if来使用，不同的语言之间的if只是语法不同，原理是相同的。</p>
<h3 id="1-shell中的运算"><a href="#1-shell中的运算" class="headerlink" title="1. shell中的运算"></a>1. shell中的运算</h3><h4 id="1-1数学比较运算"><a href="#1-1数学比较运算" class="headerlink" title="1.1数学比较运算"></a>1.1数学比较运算</h4><p>运算符解释：</p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-eq</td>
<td>等于</td>
</tr>
<tr>
<td align="center">-gt</td>
<td>大于</td>
</tr>
<tr>
<td align="center">-lt</td>
<td>小于</td>
</tr>
<tr>
<td align="center">-ge</td>
<td>大于或等于</td>
</tr>
<tr>
<td align="center">-le</td>
<td>小于或等于</td>
</tr>
<tr>
<td align="center">-ne</td>
<td>不等于</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test 1 -eq 1;$?		#0（shell中0为真，1为假）</span><br><span class="line">test 1 -lt 1;$?		#1	</span><br></pre></td></tr></table></figure>
<h4 id="1-2字符串比较运算"><a href="#1-2字符串比较运算" class="headerlink" title="1.2字符串比较运算"></a>1.2字符串比较运算</h4><p>运算符解释，注意字符串一定别忘了使用引号引起来</p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">==</td>
<td>等于</td>
</tr>
<tr>
<td align="center">!=</td>
<td>不等于</td>
</tr>
<tr>
<td align="center">-n</td>
<td>检查字符串的长度是否大于0</td>
</tr>
<tr>
<td align="center">-z</td>
<td>检查字符串的长度是否为0</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test &#x27;abc&#x27; -n</span><br></pre></td></tr></table></figure>
<h4 id="1-3文件比较与检查"><a href="#1-3文件比较与检查" class="headerlink" title="1.3文件比较与检查"></a>1.3文件比较与检查</h4><table>
<thead>
<tr>
<th align="center">运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-d</td>
<td>检查文件是否存在且为目录</td>
</tr>
<tr>
<td align="center">-e</td>
<td>检查文件是否存在</td>
</tr>
<tr>
<td align="center">-f</td>
<td>检查文件是否存在且为文件</td>
</tr>
<tr>
<td align="center">-r</td>
<td>检查文件是否存在且可读</td>
</tr>
<tr>
<td align="center">-s</td>
<td>检查文件是否存在且不为空</td>
</tr>
<tr>
<td align="center">-w</td>
<td>检查文件是否存在且可写</td>
</tr>
<tr>
<td align="center">-x</td>
<td>检查文件是否存在且可执行</td>
</tr>
<tr>
<td align="center">-O</td>
<td>检查文件是否存在并且被当前用户拥有</td>
</tr>
<tr>
<td align="center">-G</td>
<td>检查文件是否存在并且默认组为当前用户组</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file1 -nt file2  检查file1是否比file2新</span><br><span class="line">file1 -ot file2  检查file1是否比file2旧</span><br><span class="line">file1 -ef file2  检查file1是否与file2是同一个文件</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test -d /opt/shell;echo $?		#0</span><br><span class="line">test -e /opt/shell/shell_05.sh;echo $?		#0</span><br></pre></td></tr></table></figure>
<h4 id="1-4逻辑运算"><a href="#1-4逻辑运算" class="headerlink" title="1.4逻辑运算"></a>1.4逻辑运算</h4><table>
<thead>
<tr>
<th align="center">运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&amp;&amp;</td>
<td>逻辑与运算</td>
</tr>
<tr>
<td align="center">||</td>
<td>逻辑或运算</td>
</tr>
<tr>
<td align="center">！</td>
<td>逻辑非运算</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if [ 1 -eq 1 ] &amp;&amp; [ 2 -eq 2 ];then echo &quot;yes&quot;;else echo &quot;no&quot;;fi		#yes</span><br></pre></td></tr></table></figure>
<p><strong>逻辑运算注意事项：逻辑与 或 运算都需要两个或以上条件，逻辑非运算只能一个条件。</strong></p>
<h4 id="1-5赋值运算"><a href="#1-5赋值运算" class="headerlink" title="1.5赋值运算"></a>1.5赋值运算</h4><p>=：赋值运算符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=10   </span><br><span class="line">name=&#x27;baism&#x27;</span><br></pre></td></tr></table></figure>


<h3 id="2-if语法"><a href="#2-if语法" class="headerlink" title="2. if语法"></a>2. if语法</h3><h4 id="2-1语法一：单if语句"><a href="#2-1语法一：单if语句" class="headerlink" title="2.1语法一：单if语句"></a>2.1语法一：单if语句</h4><p>适用范围:只需要一步判断，条件返回真干什么或者条件返回假干什么。</p>
<p>语句格式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ]           #condition 值为true or false</span><br><span class="line">   then</span><br><span class="line">      commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>判断当前用户是不是root，如果不是那么返回”ERROR: need to be root so that!“</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if[ $USER != &#x27;root&#x27; ]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;ERROR:need to be so that&quot;</span><br><span class="line">		exit 1</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h4 id="2-2语法二：if-then-else语句"><a href="#2-2语法二：if-then-else语句" class="headerlink" title="2.2语法二：if-then-else语句"></a>2.2语法二：if-then-else语句</h4><p>适用范围:两步判断，条件为真干什么，条件为假干什么。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ]</span><br><span class="line">     then</span><br><span class="line">          commands1</span><br><span class="line">else</span><br><span class="line">          commands2</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>判断当前登录用户是管理员还是普通用户,如果是管理员输出”hey admin“ 如果是普通用户输出”hey guest“</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if [ $USER == &#x27;root&#x27; ]</span><br><span class="line">	then </span><br><span class="line">		echo &quot;hey admin&quot;</span><br><span class="line">else </span><br><span class="line">		echo &quot;hey guest&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h4 id="2-3语法三：if-then-elif语句"><a href="#2-3语法三：if-then-elif语句" class="headerlink" title="2.3语法三：if-then-elif语句"></a>2.3语法三：if-then-elif语句</h4><p>适用范围:多于两个以上的判断结果，也就是多于一个以上的判断条件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if [ condition 1]</span><br><span class="line">     then</span><br><span class="line">            commands1</span><br><span class="line">elif [ condition 2]</span><br><span class="line">     then</span><br><span class="line">             commands2</span><br><span class="line">  .......</span><br><span class="line">else</span><br><span class="line">            commandsX</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>通过一个脚本，判断两个整数的关系。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if [ $1 -gt $2 ]</span><br><span class="line">	then</span><br><span class="line">        echo &quot;$1 &gt; $2&quot;</span><br><span class="line">elif [ $1 -eq $2 ]</span><br><span class="line">	then</span><br><span class="line">        echo &quot;$1 = $2&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;$1 &lt; $2&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>


<h3 id="3-if高级应用"><a href="#3-if高级应用" class="headerlink" title="3. if高级应用"></a>3. if高级应用</h3><ol>
<li>条件符号使用双圆括号，可以在条件中植入数学表达式</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (( 100%3+1&gt;1 ));then</span><br><span class="line">	echo &quot;yes&quot;</span><br><span class="line">else</span><br><span class="line">	echo &quot;no&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p><strong>注意 双小圆括号中的比较运算符 使用的是我们传统的比较运算符 &gt;&gt;= == &lt;&lt;= !=</strong></p>
<ol start="2">
<li>使用双方括号,可以在条件中使用通配符</li>
</ol>
<p>为字符串提供高级功能，模式匹配 r* 匹配r开头的字符串</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for i in r1 rr2 cc rr3</span><br><span class="line">	do</span><br><span class="line">		if [[ $i == r* ]];then</span><br><span class="line">			echo $i</span><br><span class="line">		fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>为字符串提供高级功能，模式匹配 r* 匹配r开头的字符串</p>
<h2 id="八、shell流程控制-for循环语句"><a href="#八、shell流程控制-for循环语句" class="headerlink" title="八、shell流程控制-for循环语句"></a>八、shell流程控制-for循环语句</h2><ul>
<li>for循环介绍</li>
</ul>
<ul>
<li>for语法</li>
<li>循环控制</li>
</ul>
<hr>
<p>脚本在执行任务的时候，总会遇到需要循环执行的时候，比如说我们需要脚本每隔五分钟执行一次ping的操作，除了计划任务，我们还可以使用脚本来完成，那么我们就用到了循环语句。</p>
<h3 id="1-for-循环介绍"><a href="#1-for-循环介绍" class="headerlink" title="1. for 循环介绍"></a>1. for 循环介绍</h3><p>很多人把for循环叫做条件循环，或者for i in 。其实前者说的就是for的特性，for循环的次数和给予的条件是成正比的，也就是你给5个条件，那么他就循环5次；后者说的是for的语法。</p>
<p>循环的优点：</p>
<ol>
<li>节省内存（完成同一个任务）</li>
<li>结构更清晰</li>
<li>节省时间成本</li>
</ol>
<h3 id="2-for语法"><a href="#2-for语法" class="headerlink" title="2. for语法"></a>2. for语法</h3><h4 id="2-1-for-语法一"><a href="#2-1-for-语法一" class="headerlink" title="2.1 for 语法一"></a>2.1 for 语法一</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for var in value1 value2 ......</span><br><span class="line">    do</span><br><span class="line">        commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>循环输出1-9数字</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for i in `seq 1 9`		#seq 1 9 是从1数到9</span><br><span class="line">	do</span><br><span class="line">		echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="2-2-for语法二"><a href="#2-2-for语法二" class="headerlink" title="2.2 for语法二"></a>2.2 for语法二</h4><p>C式的for命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for ((变量;条件;自增减运算  ))</span><br><span class="line">   do</span><br><span class="line">          代码块</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>输出1-9</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for (( i=1;i&lt;10;i++ ))</span><br><span class="line">	do</span><br><span class="line">		echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>for循环使用多个变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for (( a=0,b=9;a&lt;10;a++,b-- ))</span><br><span class="line">	do</span><br><span class="line">		echo $a,$b</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>for 无限循环 使用((;;)) 条件可以实现无线循环</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for ((;;))</span><br><span class="line">	do</span><br><span class="line">		echo &quot;hehe&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h3 id="3-循环控制语句"><a href="#3-循环控制语句" class="headerlink" title="3.循环控制语句"></a>3.循环控制语句</h3><h4 id="3-1-sleep-N-脚本执行到该步休眠N秒"><a href="#3-1-sleep-N-脚本执行到该步休眠N秒" class="headerlink" title="3.1 sleep N 脚本执行到该步休眠N秒"></a>3.1 sleep N 脚本执行到该步休眠N秒</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for i in `seq 9 -1 0`</span><br><span class="line">	do</span><br><span class="line">		echo -n -e &quot;\b$i&quot;</span><br><span class="line">		sleep 1</span><br><span class="line">done</span><br><span class="line">echo</span><br></pre></td></tr></table></figure>
<h4 id="3-2-continue-跳过循环中的某次循环"><a href="#3-2-continue-跳过循环中的某次循环" class="headerlink" title="3.2 continue 跳过循环中的某次循环"></a>3.2 continue 跳过循环中的某次循环</h4><p>默认循环输出1-9，但是使用continue跳过输出5</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for (( i=1;i&lt;10;i++ ))</span><br><span class="line">	do</span><br><span class="line">		if [ $i -eq 5 ]</span><br><span class="line">			then</span><br><span class="line">				continue</span><br><span class="line">			else</span><br><span class="line">            	echo $i</span><br><span class="line">            fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="3-3-break-跳出循环继续执行后续代码"><a href="#3-3-break-跳出循环继续执行后续代码" class="headerlink" title="3.3 break 跳出循环继续执行后续代码"></a>3.3 break 跳出循环继续执行后续代码</h4><p>默认循环输出1-9，当输出到5的时候跳出循环</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for (( i=1;i&lt;10;i++ ))</span><br><span class="line">	do</span><br><span class="line">		echo $i</span><br><span class="line">		if [ $i -eq 5 ]</span><br><span class="line">			then</span><br><span class="line">				break</span><br><span class="line">            fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="3-4实例"><a href="#3-4实例" class="headerlink" title="3.4实例"></a>3.4实例</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">监控主机存活的脚本</span></span><br><span class="line">for ((;;))</span><br><span class="line">	do</span><br><span class="line">		ping -c1 $1 &amp;&gt;/dev/null		#-c1是是发送一个请求包，并将返回数据放进回收站</span><br><span class="line">		if [ $? -eq 0 ]</span><br><span class="line">			then </span><br><span class="line">				echo &quot;`date +&quot;%F %H:%M:%S&quot;`: $1 is UP&quot;</span><br><span class="line">			else </span><br><span class="line">				echo &quot;`date +&quot;%F %H:%M:%S&quot;`: $1 is DOWN&quot;</span><br><span class="line">			fi</span><br><span class="line"><span class="meta">		#</span><span class="bash">脚本节奏控制 生产环境下建议1分钟及以上</span></span><br><span class="line">		sleep 3</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h2 id="九、shell流程控制-while循环语句"><a href="#九、shell流程控制-while循环语句" class="headerlink" title="九、shell流程控制-while循环语句"></a>九、shell流程控制-while循环语句</h2><ul>
<li>while循环介绍</li>
<li>while循环语法</li>
<li>while实战</li>
</ul>
<hr>
<h3 id="1-while循环介绍"><a href="#1-while循环介绍" class="headerlink" title="1. while循环介绍"></a>1. while循环介绍</h3><p>while在shell中也是负责循环的语句，和for一样。因为功能一样，很多人在学习和工作中的脚本遇到循环到底该使用for还是while呢？很多人不知道，就造就了有人一遇到循环就是for或者一位的while。我个人认为可以按照我说的这个思想来使用，既知道循环次数就可以用for，比如说一天需要循环24次；如果不知道代码要循环多少次，那就用while，比如我们作业中要求写的猜数字，每个人猜对一个数字的次数都是不能固定的，也是未知的。所以这样的循环我就建议大家用while了。</p>
<h3 id="2-while循环语法"><a href="#2-while循环语法" class="headerlink" title="2.while循环语法"></a>2.while循环语法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while  [ condition ]      #注意，条件为真while才会循环，条件为假，while停止循环</span><br><span class="line"> do</span><br><span class="line">             commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>丈母娘选女婿条件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">read -p &quot;money:&quot; money</span><br><span class="line">read -p &quot;car:&quot; car</span><br><span class="line">read -p &quot;house:&quot; house</span><br><span class="line">while [ $money -lt 100000 ] || [ $car -lt 1 ] || [ $house -lt 1 ]</span><br><span class="line">	do</span><br><span class="line">		echo &quot;不行&quot;</span><br><span class="line">		read -p &quot;money:&quot; money</span><br><span class="line">		read -p &quot;car:&quot; car</span><br><span class="line">		read -p &quot;house:&quot; house</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;给你了&quot;</span><br></pre></td></tr></table></figure>


<h3 id="3-while实战"><a href="#3-while实战" class="headerlink" title="3. while实战"></a>3. while实战</h3><ol>
<li>使用while 遍历文件内容</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">使用<span class="keyword">while</span>遍历文件内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">while read i</span><br><span class="line">	do</span><br><span class="line">		echo &quot;$i&quot;</span><br><span class="line">done &lt; $1</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>使用while读出文件中的列，IFS指定默认的列分隔符</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">使用<span class="keyword">while</span>读出文件中的列，IFS指定默认的列分隔符</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">IFS=$&quot;:&quot;</span><br><span class="line">while read f1 f2 f3 f4 f5 f6 f7</span><br><span class="line">	do</span><br><span class="line">		echo &quot;$f1 $f2 $f3&quot;</span><br><span class="line">done &lt; /etc/passwd		</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>九九乘法表</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">九九乘法表</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">n=1</span><br><span class="line">while [ $n -lt 10 ];do</span><br><span class="line">	for ((m=1;m&lt;=$n;m++));do</span><br><span class="line">		echo -n -e &quot;$m*$n=$((m*n))\t&quot;</span><br><span class="line">	done</span><br><span class="line">	echo</span><br><span class="line">	n=$((n+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h2 id="十、shell流程控制-until循环语句"><a href="#十、shell流程控制-until循环语句" class="headerlink" title="十、shell流程控制-until循环语句"></a>十、shell流程控制-until循环语句</h2><ul>
<li>until介绍</li>
<li>until语法</li>
<li>案例分享</li>
</ul>
<hr>
<h3 id="1-until介绍"><a href="#1-until介绍" class="headerlink" title="1. until介绍"></a>1. until介绍</h3><p>和while正好相反，until是条件为假开始执行，条件为真停止执行。</p>
<h3 id="2-until语法"><a href="#2-until语法" class="headerlink" title="2. until语法"></a>2. until语法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until [ condition ]      #注意，条件为假until才会循环，条件为真，until停止循环</span><br><span class="line"> do</span><br><span class="line">         commands代码块</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h3 id="3-案例"><a href="#3-案例" class="headerlink" title="3.案例"></a>3.案例</h3><ol>
<li>打印10-20数字</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">init_num=10</span><br><span class="line">until [ $init_num -gt 20 ]</span><br><span class="line">   do</span><br><span class="line">       echo $init_num</span><br><span class="line">       init_num=$((init_num + 1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h2 id="十一、shell流程控制-case条件判断语句"><a href="#十一、shell流程控制-case条件判断语句" class="headerlink" title="十一、shell流程控制-case条件判断语句"></a>十一、shell流程控制-case条件判断语句</h2><ul>
<li>case介绍</li>
<li>case语法</li>
<li>shell特殊变量</li>
</ul>
<hr>
<h3 id="1-case介绍"><a href="#1-case介绍" class="headerlink" title="1. case介绍"></a>1. case介绍</h3><p>在生产环境中，我们总会遇到一个问题需要根据不同的状况来执行不同的预案，那么我们要处理这样的问题就要首先根据可能出现的情况写出对应预案，根据出现的情况来加载不同的预案。</p>
<p><strong>特点：根据给予的不同条件执行不同的代码块</strong></p>
<h3 id="2-case语法"><a href="#2-case语法" class="headerlink" title="2. case语法"></a>2. case语法</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">case 变量  in </span><br><span class="line">条件1）</span><br><span class="line">           执行代码块1</span><br><span class="line">;;</span><br><span class="line">条件2）</span><br><span class="line">           执行代码块2</span><br><span class="line">;;</span><br><span class="line">......</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p><strong>注意：每个代码块执行完毕要以;;结尾代表结束，case结尾要以倒过来写的esac来结束。</strong></p>
<p>案例说明</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">read -p &quot;NUM: &quot; N</span><br><span class="line">case $N in</span><br><span class="line">1)</span><br><span class="line">   echo haha</span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">  echo hehe</span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">   echo heihei</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">   echo bye</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>


<h3 id="3-shell特殊变量"><a href="#3-shell特殊变量" class="headerlink" title="3. shell特殊变量"></a>3. shell特殊变量</h3><p>特殊参数：</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$*</td>
<td>代表所有参数，其间隔为IFS内定参数的第一个字元</td>
</tr>
<tr>
<td align="center">$@</td>
<td>与*星号类同。不同之处在於不参照IFS</td>
</tr>
<tr>
<td align="center">$#</td>
<td>代表参数数量</td>
</tr>
<tr>
<td align="center">$</td>
<td>执行上一个指令的返回值</td>
</tr>
<tr>
<td align="center">$-</td>
<td>最近执行的foreground pipeline的选项参数</td>
</tr>
<tr>
<td align="center">$N</td>
<td>shell的第几个外传参数</td>
</tr>
<tr>
<td align="center">$_</td>
<td>显示出最後一个执行的命令</td>
</tr>
<tr>
<td align="center">$$</td>
<td>本身的Process ID</td>
</tr>
<tr>
<td align="center">$0</td>
<td>脚本的名字</td>
</tr>
</tbody></table>
<h2 id="十二、shell函数"><a href="#十二、shell函数" class="headerlink" title="十二、shell函数"></a>十二、shell函数</h2><ul>
<li>函数介绍</li>
<li>函数语法</li>
<li>函数应用</li>
<li>实战</li>
</ul>
<hr>
<h3 id="1-函数介绍"><a href="#1-函数介绍" class="headerlink" title="1.函数介绍"></a>1.函数介绍</h3><p>在写代码的时候，我们很多人习惯从头写到结束，完成以后在一起测试。但是到测试阶段才发现：错误一大堆，上帝啊！弄死我吧！</p>
<p>为了解决这个问题，建议大家把代码模块化，一个模块实现一个功能，哪怕是一个很小的功能都可以，这样的话我们写代码就会逻辑上比较简单，代码量比较少，排错简单，这也就是函数的好处。</p>
<p>函数的优点：</p>
<ol>
<li>代码模块化，调用方便，节省内存</li>
<li>代码模块化，代码量少，排错简单</li>
<li>代码模块化，可以改变代码的执行顺序</li>
</ol>
<h3 id="2-函数的语法"><a href="#2-函数的语法" class="headerlink" title="2.函数的语法"></a>2.函数的语法</h3><p>语法一：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">函数名 () &#123;</span><br><span class="line">    代码块</span><br><span class="line">    return N</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>语法二：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function 函数名 &#123;</span><br><span class="line">      代码块</span><br><span class="line">      return N</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>


<h3 id="3-函数的应用"><a href="#3-函数的应用" class="headerlink" title="3.函数的应用"></a>3.函数的应用</h3><h4 id="3-1定义一个函数"><a href="#3-1定义一个函数" class="headerlink" title="3.1定义一个函数"></a>3.1定义一个函数</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print () &#123;</span><br><span class="line">    echo &quot;welcome to ayitula&quot;</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function hello &#123;</span><br><span class="line">    echo &quot;hello world&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>print 和 hello就是函数的名字，函数名字命名参考变量一节中的变量命名规则</p>
<h4 id="3-2函数应用"><a href="#3-2函数应用" class="headerlink" title="3.2函数应用"></a>3.2函数应用</h4><p>定义好函数后，如果想调用该函数，只需通过函数名调用即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">N1 () &#123;</span><br><span class="line">	echo &quot;`date +%F`&quot;</span><br><span class="line">&#125;</span><br><span class="line">N2 () &#123;</span><br><span class="line">	echo -e &quot;\t\t\t\twelcome to ayitula&quot;</span><br><span class="line">	echo -e &quot;\n&quot;</span><br><span class="line">&#125;</span><br><span class="line">N3 () &#123;</span><br><span class="line">	echo &quot;1) 剪子&quot;</span><br><span class="line">	echo &quot;2) 石头&quot;</span><br><span class="line">	echo &quot;3) 布&quot;</span><br><span class="line">&#125;</span><br><span class="line">N4 () &#123;</span><br><span class="line">	echo -e &quot;\n\n\n&quot;</span><br><span class="line">	read -p &quot;请输入代码: &quot; DL</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">调用代码</span></span><br><span class="line">N2</span><br><span class="line">N1</span><br><span class="line">N3</span><br><span class="line">N4</span><br></pre></td></tr></table></figure>


<h3 id="4-实战"><a href="#4-实战" class="headerlink" title="4.实战"></a>4.实战</h3><p> nginx启动管理脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nginx service manage script</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">variables</span></span><br><span class="line">nginx_install_doc=/usr/local/nginx</span><br><span class="line">proc=nginx</span><br><span class="line">nginxd=$nginx_install_doc/sbin/nginx</span><br><span class="line">pid_file=$nginx_install_doc/logs/nginx.pid</span><br><span class="line">nginx_process_id=`cat $pid_fileps`</span><br><span class="line">ngnix_process_num=`ps aux |grep nginx_process_id|grep -v &quot;grep&quot;|wc -l`</span><br><span class="line"><span class="meta">#</span><span class="bash">Source <span class="keyword">function</span> library</span></span><br><span class="line">if [ -f /etc/init.d/functions ];then</span><br><span class="line">	. /etc/init.d/functions</span><br><span class="line">else</span><br><span class="line">	echo &quot;not found /etc/init.d/functions&quot;</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">function</span></span></span><br><span class="line">start () &#123;</span><br><span class="line"><span class="meta">#</span><span class="bash">如果nginx没有启动直接启动，否则报错已经启动</span></span><br><span class="line">if [ -f $pid_file ];tnen</span><br><span class="line">	if [ -f $pid_file ]&amp;&amp;[ $ngnix_process_num -ge 1 ];then</span><br><span class="line">		echo &quot;nginx running ......&quot;</span><br><span class="line">	else</span><br><span class="line">		if [ -f $pid_file ]&amp;&amp;[ $ngnix_process_num -lt 1 ];then</span><br><span class="line">		rm -f $pid_file	</span><br><span class="line">        echo &quot;ngin start `daemon $nginxd`&quot;</span><br><span class="line">	fi</span><br><span class="line">	echo &quot;ngin start `daemon $nginxd`&quot;</span><br><span class="line">fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stop () &#123;</span><br><span class="line">	if [ -f $pid_file ]&amp;&amp;[ $ngnix_process_num -ge 1 ];then</span><br><span class="line">		action &quot;ngnix stop&quot; killall -s QUIT $proc</span><br><span class="line">		rm -f $pid_file</span><br><span class="line">	else</span><br><span class="line">		action &quot;nginx stop&quot; killall -s QUIT $proc 2&gt;/dev/null</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart () &#123;</span><br><span class="line">	stop</span><br><span class="line">	sleep 1</span><br><span class="line">	start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reload () &#123;</span><br><span class="line">	if [ -f $pid_file ]&amp;&amp;[ $ngnix_process_num -ge 1 ];then</span><br><span class="line">		action &quot;nginx reload&quot; killall -s HUP $proc</span><br><span class="line">	else</span><br><span class="line">		action &quot;nginx reload&quot; killall -s HUP $proc	2&gt;/dev/null</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status () &#123;</span><br><span class="line">	if [ -f $pid_file ]&amp;&amp;[ $ngnix_process_num -ge 1 ];then</span><br><span class="line">		echo &quot;nginx running ...&quot;</span><br><span class="line">	else</span><br><span class="line">		echo &quot;nginx stop&quot;</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">callable</span></span><br><span class="line">case $1 in</span><br><span class="line">start) start;;</span><br><span class="line">stop) stop;;</span><br><span class="line">restart) restart;;</span><br><span class="line">reload) reload;;</span><br><span class="line">status) status;;</span><br><span class="line">*) echo &quot;USAGE:$0 start|stop|restart|reload|status&quot;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>


<h2 id="十三、正则表达式"><a href="#十三、正则表达式" class="headerlink" title="十三、正则表达式"></a>十三、正则表达式</h2><ul>
<li>正则表达式介绍</li>
<li>特殊字符</li>
<li>POSIX特殊字符</li>
</ul>
<hr>
<h3 id="1-正则表达式介绍"><a href="#1-正则表达式介绍" class="headerlink" title="1.正则表达式介绍"></a>1.正则表达式介绍</h3><p>正则表达式是一种文本模式匹配，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为”元字符”）。它是一种字符串匹配的模式，可以用来检查一个字符串是否含有某种子串、将匹配的子串替换或者从某个字符串中取出某个条件的子串。</p>
<p>正则表达式就像数学公式一样，我们可以通过正则表达式提供的一些特殊字符来生成一个匹配对应字符串的公式，用此来从海量数据中匹配出自己想要的数据。</p>
<p>正则表达式是一个三方产品，被常用计算机语言广泛使用，比如：shell、PHP、python、java、js等！</p>
<p>shell也支持正则表达式，但不是所有的命令都支持正则表达式，常见的的命令中只有grep、sed、awk命令支持正则表达式。</p>
<h3 id="2-特殊字符"><a href="#2-特殊字符" class="headerlink" title="2.特殊字符"></a>2.特殊字符</h3><p>定位符使用技巧：同时锚定开头和结尾，做精确匹配；单一锚定开头和结尾，做模糊匹配。</p>
<table>
<thead>
<tr>
<th align="center">定位符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">^</td>
<td align="center">锚定开头 ^a 以a开头 默认锚定一个字符</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">锚定结尾 a$ 以a结尾 默认锚定一个字符</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾的字符串</span></span><br><span class="line">egrep &quot;^ac$&quot; file </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">模糊匹配  以a开头的字符串</span></span><br><span class="line">egrep &quot;^a&quot; file </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">模糊匹配 以c结尾的字符串</span></span><br><span class="line">egrep &quot;c$&quot; file  </span><br></pre></td></tr></table></figure>
<p>匹配符:匹配字符串</p>
<table>
<thead>
<tr>
<th align="center"><strong>匹配符</strong></th>
<th align="left"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">.</td>
<td align="left">匹配除回车以外的任意字符</td>
</tr>
<tr>
<td align="center">( )</td>
<td align="left">字符串分组</td>
</tr>
<tr>
<td align="center">[ ]</td>
<td align="left">定义字符类，匹配括号中的一个字符</td>
</tr>
<tr>
<td align="center">[ ^ ]</td>
<td align="left">表示否定括号中出现字符类中的字符,取反</td>
</tr>
<tr>
<td align="center">\</td>
<td align="left">转义字符</td>
</tr>
<tr>
<td align="center">|</td>
<td align="left">或</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间任意  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a.c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间不包含a-z,0-9  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[^a-z0-9]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以e开头f结尾  中间是*号  长度为三个字节的字符串  e*f</span></span><br><span class="line">egrep &quot;^e\*f$&quot; file </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配 以a开头b或c结尾  中间是任意  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a.(b|c)$&quot; file </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">模糊匹配  以cc结尾的字符串   因为$只能锚定单个字符，如果是一个字符串就需要用()来做定义</span></span><br><span class="line">egrep &quot;(cc)$&quot; file</span><br></pre></td></tr></table></figure>
<p>限定符:对前面的字符或者字符串做限定说明</p>
<table>
<thead>
<tr>
<th align="center"><strong>限定符</strong></th>
<th align="left"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">*</td>
<td align="left">某个字符之后加星号表示该字符不出现或出现多次</td>
</tr>
<tr>
<td align="center">?</td>
<td align="left">与星号相似，但略有变化，表示该字符出现一次或不出现</td>
</tr>
<tr>
<td align="center">+</td>
<td align="left">与星号相似，表示其前面字符出现一次或多次，但必须出现一次</td>
</tr>
<tr>
<td align="center">{n,m}</td>
<td align="left">某个字符之后出现，表示该字符最少n次，最多m次</td>
</tr>
<tr>
<td align="center">{m}</td>
<td align="left">正好出现了m次</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">精确匹配 以a开头 c结尾 中间是有b或者没有b 长度不限的字符串</span></span><br><span class="line">egrep &quot;^ab*c$&quot; file</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配 以a开头 c结尾 中间只出现一次b或者没有b的字符串</span></span><br><span class="line">egrep &quot;^ab?c$&quot; file </span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配 以a开头 c结尾 中间是有b且至少出现一次 长度不限的字符串</span></span><br><span class="line">egrep &quot;^ab+c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配 以a开头 c结尾 中间是有b且至少出现两次最多出现四次 长度不限的字符串</span></span><br><span class="line">egrep &quot;^ab&#123;2,4&#125;c$&quot; file </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配 以a开头 c结尾 中间是有b且正好出现三次的字符串</span></span><br><span class="line">egrep &quot;^ab&#123;3&#125;c$&quot; file </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配 以a开头 c结尾 中间是有b且至少出现一次的字符串</span></span><br><span class="line">egrep &quot;^ab&#123;1,&#125;c$&quot; file</span><br></pre></td></tr></table></figure>


<h3 id="3-POSIX特殊字符"><a href="#3-POSIX特殊字符" class="headerlink" title="3. POSIX特殊字符"></a>3. POSIX特殊字符</h3><table>
<thead>
<tr>
<th align="center"><strong>特殊字符</strong></th>
<th align="left"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">[:alnum:]</td>
<td align="left">匹配任意字母字符0-9 a-z A-Z</td>
</tr>
<tr>
<td align="center">[:alpha:]</td>
<td align="left">匹配任意字母，大写或小写</td>
</tr>
<tr>
<td align="center">[:digit:]</td>
<td align="left">数字 0-9</td>
</tr>
<tr>
<td align="center">[:graph:]</td>
<td align="left">非空字符( 非空格控制字符)</td>
</tr>
<tr>
<td align="center">[:lower:]</td>
<td align="left">小写字符a-z</td>
</tr>
<tr>
<td align="center">[:upper:]</td>
<td align="left">大写字符A-Z</td>
</tr>
<tr>
<td align="center">[:cntrl:]</td>
<td align="left">控制字符</td>
</tr>
<tr>
<td align="center">[:print:]</td>
<td align="left">非空字符( 包括空格)</td>
</tr>
<tr>
<td align="center">[:punct:]</td>
<td align="left">标点符号</td>
</tr>
<tr>
<td align="center">[:blank:]</td>
<td align="left">空格和TAB字符</td>
</tr>
<tr>
<td align="center">[:xdigit:]</td>
<td align="left">16 进制数字</td>
</tr>
<tr>
<td align="center">[:space:]</td>
<td align="left">所有空白字符( 新行、空格、制表符)</td>
</tr>
</tbody></table>
<p><strong>注意 <code>[[ ]]</code> 双中括号的意思:  第一个中括号是匹配符<code>[]</code>匹配中括号中的任意一个字符，第二个<code>[]</code>是格式 如[:digit:]</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间a-zA-Z0-9任意字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:alnum:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是a-zA-Z任意字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:alpha:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是0-9任意字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:digit:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是a-z任意字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:lower:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是A-Z任意字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:upper:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是非空任意字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:print:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是符号字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:punct:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是空格或者TAB符字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:blank:]]c$&quot; file</span><br><span class="line">egrep &quot;^a[[:space:]]c$&quot; file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">精确匹配  以a开头c结尾  中间是十六进制字符  长度为三个字节的字符串</span></span><br><span class="line">egrep &quot;^a[[:xdigit:]]c$&quot; file</span><br></pre></td></tr></table></figure>
<p>案例</p>
<ol>
<li>匹配合法的IP地址</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">egrep &#x27;^((25[0-5]|2[0-4][[:digit:]]|[01]?[[:digit:]][[:digit:]]?).)&#123;3&#125;(25[0-5]|2[0-4][[:digit:]]|[01]?[[:digit:]][[:digit:]]?)$&#x27; —color ip.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>匹配座机电话号码</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">egrep &#x27;^[[:graph:]]&#123;12&#125;$” number |egrep “^(0[1-9][0-9][0-9]?)-[1-9][0-9]&#123;6,7&#125;$&#x27;</span><br></pre></td></tr></table></figure>


<h2 id="十四、shell对文件的操作"><a href="#十四、shell对文件的操作" class="headerlink" title="十四、shell对文件的操作"></a>十四、shell对文件的操作</h2><ul>
<li>简介</li>
<li>sed命令</li>
<li>sed小技巧</li>
<li>实战</li>
</ul>
<hr>
<h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>在shell脚本编写中，时常会用到对文件的相关操作，比如增加内容，修改内容，删除部分内容，查看部分内容等，但是上述举例的这些操作一般都是需要在文本编辑器中才能操作，常用的文本编辑器如：gedit、vim、nano等又是交互式文本编辑器，脚本无法自己独立完成，必须有人参与才可以完成。如果这样的话又违背了我们编写脚本的意愿(全部由机器来完成，减少人的工作压力，提升工作效率)。emm….如何才能让这些操作全部脚本自己就搞定，而不需要人的参与，而且又能按照我们的脚本预案来完成呢？</p>
<p>为了解决上述问题，linux为大家提供了一些命令,比如Perl、sed等命令，今天我就着重为大家介绍一下sed命令。</p>
<h3 id="2-sed命令"><a href="#2-sed命令" class="headerlink" title="2.sed命令"></a>2.sed命令</h3><p>sed是linux中提供的一个外部命令,它是一个行(流)编辑器，非交互式的对文件内容进行增删改查的操作，使用者只能在命令行输入编辑命令、指定文件名，然后在屏幕上查看输出。它和文本编辑器有本质的区别。</p>
<blockquote>
<p><strong>区别：</strong></p>
<p>文本编辑器: 编辑对象是文件</p>
<p>行编辑器：编辑对象是文件中的行</p>
</blockquote>
<p>也就是前者一次处理一个文本，而后者是一次处理一个文本中的一行。这个是我们应该弄清楚且必须牢记的，否者可能无法理解sed的运行原理和使用精髓。</p>
<h4 id="2-1-sed数据处理原理"><a href="#2-1-sed数据处理原理" class="headerlink" title="2.1 sed数据处理原理"></a>2.1 sed数据处理原理</h4><p><img src="https://raw.githubusercontent.com/JOHN-FROD/PicGo/main/blog-img/image-20210128150037313.png" alt="image-20210128150037313"></p>
<h4 id="2-2-sed命令"><a href="#2-2-sed命令" class="headerlink" title="2.2 sed命令"></a>2.2 sed命令</h4><p>语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [options] &#x27;&#123;command&#125;[flags]&#x27; [filename]</span><br></pre></td></tr></table></figure>
<p>命令选项[options]</p>
<table>
<thead>
<tr>
<th align="center">选项[options]</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-e script</td>
<td>将脚本中指定的命令添加到处理输入时执行的命令中  多条件，一行中要有多个操作</td>
</tr>
<tr>
<td align="center">-f script</td>
<td>将文件中指定的命令添加到处理输入时执行的命令中</td>
</tr>
<tr>
<td align="center">-n</td>
<td>抑制自动输出</td>
</tr>
<tr>
<td align="center">-i</td>
<td>编辑文件内容</td>
</tr>
<tr>
<td align="center">-i.bak</td>
<td>修改时同时创建.bak备份文件</td>
</tr>
<tr>
<td align="center">-r</td>
<td>使用扩展的正则表达式</td>
</tr>
<tr>
<td align="center">!</td>
<td>取反 （跟在模式条件后与shell有所区别）</td>
</tr>
</tbody></table>
<p>常用内部命令{command}</p>
<table>
<thead>
<tr>
<th align="center">命令{command}</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a</td>
<td>在匹配后面添加</td>
</tr>
<tr>
<td align="center">i</td>
<td>在匹配前面添加</td>
</tr>
<tr>
<td align="center">p</td>
<td>打印</td>
</tr>
<tr>
<td align="center">d</td>
<td>删除</td>
</tr>
<tr>
<td align="center">s</td>
<td>查找替换</td>
</tr>
<tr>
<td align="center">c</td>
<td>更改</td>
</tr>
<tr>
<td align="center">y</td>
<td>转换   N D P</td>
</tr>
</tbody></table>
<p>标志位[flags]</p>
<table>
<thead>
<tr>
<th align="center">标志[flags]</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">数字</td>
<td>表示新文本替换的模式</td>
</tr>
<tr>
<td align="center">g</td>
<td>表示用新文本替换现有文本的全部实例</td>
</tr>
<tr>
<td align="center">p</td>
<td>表示打印原始的内容</td>
</tr>
<tr>
<td align="center">w filename</td>
<td>将替换的结果写入文件</td>
</tr>
</tbody></table>
<h5 id="2-2-1-sed内部命令说明"><a href="#2-2-1-sed内部命令说明" class="headerlink" title="2.2.1 sed内部命令说明"></a>2.2.1 sed内部命令说明</h5><ol>
<li>文件内容增加操作,将数据追加到某个位置之后，使用命令a。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在data1的每行后追加一行新数据内容: append data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;a\append data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">在第二行后新开一行追加数据: append data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2a\append data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">在第二到四行每行后新开一行追加数据: append data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2,4a\append data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">匹配字符串追加: 找到包含<span class="string">&quot;3 the&quot;</span>的行，在其后新开一行追加内容: append data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;/3 the/a\append data &quot;haha&quot;&#x27; data1</span><br></pre></td></tr></table></figure>
<p>​    <strong>//开启匹配模式  /要匹配的字符串/</strong></p>
<ol start="2">
<li>文件内容增加操作,将数据插入到某个位置之前，使用命令i。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在data1的每行前插入一行新数据内容: insert data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;i\insert data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">在第二行前新开一行插入数据: insert data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2i\insert data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">在第二到四行每行前新开一行插入数据: insert data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2,4i\insert data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">匹配字符串插入: 找到包含<span class="string">&quot;3 the&quot;</span>的行，在其前新开一行插入内容: insert data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;/3 the/i\insert data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>文件内容修改操作—替换,将一行中匹配的内容替换为新的数据，使用命令s。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">从标准输出流中做替换，将<span class="built_in">test</span>替换为text</span></span><br><span class="line">echo &quot;this is a test&quot; |sed &#x27;s/test/text/&#x27;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将data1中每行的dog替换为cat</span></span><br><span class="line">sed &#x27;s/dog/cat/&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将data1中第二行的dog替换为cat</span></span><br><span class="line">sed &#x27;2s/dog/cat/&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将data1中第二到第四行的dog替换为cat</span></span><br><span class="line">sed &#x27;2,4s/dog/cat/&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">匹配字符串替换:将包含字符串<span class="string">&quot;3 the&quot;</span>的行中的dog替换为cat</span></span><br><span class="line">sed &#x27;/3 the/s/dog/cat/&#x27; data1</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>文件内容修改操作—更改,将一行中匹配的内容替换为新的数据，使用命令c。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将data1文件中的所有行的内容更改为: change data <span class="string">&quot;data&quot;</span></span></span><br><span class="line">sed &#x27;c\change data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将data1文件第二行的内容更改为: change data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2c\change data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将data1文件中的第二、三、四行的内容更改为：change data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;2,4c\change data &quot;haha&quot;&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将data1文件中包含<span class="string">&quot;3 the&quot;</span>的行内容更改为: change data <span class="string">&quot;haha&quot;</span></span></span><br><span class="line">sed &#x27;/3 the/c\change data &quot;data&quot;&#x27; data1</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>文件内容修改操作—字符转换，将一行中匹配的内容替换为新的数据，使用命令y。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将data1中的a b c字符转换为对应的 A  B  C字符</span></span><br><span class="line">sed &#x27;y/abc/ABC/&#x27; data1</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>文件内容删除，将文件中的指定数据删除，使用命令d。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">删除文件data1中的所有数据</span></span><br><span class="line">sed &#x27;d&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除文件data1中的第三行数据</span></span><br><span class="line">sed &#x27;3d&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除文件data1第三到第四行的数据</span></span><br><span class="line">sed &#x27;3,4d&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除文件data1中包含字符串<span class="string">&quot;3 the&quot;</span>的行</span></span><br><span class="line">sed &#x27;/3 the/d&#x27; data1</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>文件内容查看，将文件内容输出到屏幕，使用命令p。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印data1文件内容</span></span><br><span class="line">sed &#x27;p&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印data1文件第三行的内容</span></span><br><span class="line">sed &#x27;3p&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印data1文件第二、三、四行内容</span></span><br><span class="line">sed &#x27;2,4p&#x27; data1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印data1文件包含字符串<span class="string">&quot;3 the&quot;</span>的行</span></span><br><span class="line">sed &#x27;/3 the/p&#x27; data1</span><br></pre></td></tr></table></figure>
<p>可以看得出，打印内容是重复的行，原因是打印了指定文件内容一次，又将读入缓存的所有数据打印了一次，所以会看到这样的效果，如果不想看到这样的结果，可以加命令选项-n抑制内存输出即可</p>
<h5 id="2-2-2命令选项说明"><a href="#2-2-2命令选项说明" class="headerlink" title="2.2.2命令选项说明"></a>2.2.2命令选项说明</h5><ol>
<li>在命令行中使用多个命令 -e</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将brown替换为green dog替换为cat</span></span><br><span class="line">sed -e &#x27;s/brown/green/;s/dog/cat/&#x27; data1</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>从文件读取编辑器命令 -f 适用于日常重复执行的场景</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">1)将命令写入文件</span></span><br><span class="line">vim abc</span><br><span class="line">s/brown/green/</span><br><span class="line">s/dog/cat/</span><br><span class="line">s/fox/elephant/</span><br><span class="line"><span class="meta">#</span><span class="bash">2)使用-f命令选项调用命令文件</span></span><br><span class="line">sed -f abc data1 </span><br></pre></td></tr></table></figure>
<ol start="3">
<li>抑制内存输出 -n</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印data1文件的第二行到最后一行内容  $最后的意思</span></span><br><span class="line">sed -n &#x27;2,$p&#x27; data1 </span><br></pre></td></tr></table></figure>
<ol start="4">
<li>使用正则表达式 -r</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印data1中以字符串<span class="string">&quot;3 the&quot;</span>开头的行内容</span></span><br><span class="line">sed -n  -r &#x27;/^(3 the)/p&#x27; data1</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>从上述的演示中，大家可以看出，数据处理只是在缓存中完成的，并没有实际修改文件内容，如果需要修改文件内容可以直接使用-i命令选项。在这里我需要说明的是-i是一个不可逆的操作，一旦修改，如果想复原就很困难，几乎不可能，所以建议大家在操作的时候可以备份一下源文件。-i命令选项提供了备份功能，比如参数使用-i.bak，那么在修改源文件的同时会先备份一个以.bak结尾的源文件，然后再进行修改操作。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">执行替换命令并修改文件</span></span><br><span class="line">sed -i.bak &#x27;s/brown/green/&#x27; data1</span><br></pre></td></tr></table></figure>
<h5 id="2-2-3标志"><a href="#2-2-3标志" class="headerlink" title="2.2.3标志"></a>2.2.3标志</h5><ol>
<li>数字标志：此标志是一个非零正数，默认情况下，执行替换的时候，如果一行中有多个符合的字符串，如果没有标志位定义，那么只会替换第一个字符串，其他的就被忽略掉了，为了能精确替换，可以使用数字位做定义。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">替换一行中的第二处dog为cat</span></span><br><span class="line">sed &#x27;s/dog/cat/2&#x27; data2</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>g标志:将一行中的所有符合的字符串全部执行替换</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将data1文件中的所有dog替换为cat</span></span><br><span class="line">sed &#x27;s/dog/cat/g&#x27; data2</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>p标志：打印文本内容，类似于-p命令选项</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将data2文件第三行中的dog换成cat并打印</span></span><br><span class="line">sed  &#x27;3s/dog/cat/p&#x27; data2</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>w filename标志:将修改的内容存入filename文件中</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将data2文件第三行中的dog换成cat并保存在text文件中</span></span><br><span class="line">sed  &#x27;3s/dog/cat/w text&#x27; data2</span><br></pre></td></tr></table></figure>


<h3 id="3-sed小技巧"><a href="#3-sed小技巧" class="headerlink" title="3. sed小技巧"></a>3. sed小技巧</h3><p>$= 统计文本有多少行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">统计data2有多少行</span></span><br><span class="line">sed -n &#x27;$=&#x27; data2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印data2内容时加上行号</span></span><br><span class="line">sed  &#x27;=&#x27; data2</span><br></pre></td></tr></table></figure>


<h3 id="4-实战-1"><a href="#4-实战-1" class="headerlink" title="4.实战"></a>4.实战</h3><p>DNS监测WEB服务状态，并根据其状态实现高可用解析</p>
<p>场景：通过DNS进行单域名多条A记录解析做负载均衡。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">CP1=0</span><br><span class="line">CP2=0</span><br><span class="line">while :</span><br><span class="line">  do</span><br><span class="line"><span class="meta">#</span><span class="bash">tong</span></span><br><span class="line">     ping -c1 192.168.18.240 &gt; /dev/null</span><br><span class="line">     if [ $? -eq 1 ] &amp;&amp; [ $CP1 -eq 0 ]</span><br><span class="line">        then</span><br><span class="line">           sed -i &#x27;/192.168.18.240/s/^/;/&#x27; /var/named/baidu.zone</span><br><span class="line">           /etc/init.d/named reload</span><br><span class="line">           CP1=1</span><br><span class="line">      fi</span><br><span class="line"><span class="meta">#</span><span class="bash">butong</span></span><br><span class="line">     ping -c1 192.168.18.240 &gt; /dev/null </span><br><span class="line">     if [ $? -eq 0 ] &amp;&amp; [ $CP1 -eq 1 ]</span><br><span class="line">        then</span><br><span class="line">            sed -i &#x27;/192.168.18.240/s/;//&#x27; /var/named/baidu.zone</span><br><span class="line">            /etc/init.d/named reload</span><br><span class="line">            CP1=0</span><br><span class="line">     fi </span><br><span class="line">    ping -c1 192.168.18.241 &gt; /dev/null</span><br><span class="line">    if [ $? -eq 1 ] &amp;&amp; [ $CP2 -eq 0 ]</span><br><span class="line">        then</span><br><span class="line">          sed -i &#x27;/192.168.18.241/s/^/;/&#x27; /var/named/baidu.zone</span><br><span class="line">          /etc/init.d/named reload</span><br><span class="line">          CP2=1</span><br><span class="line">    fi</span><br><span class="line">       ping -c1 192.168.18.241 &gt; /dev/null</span><br><span class="line">     if [ $? -eq 0 ] &amp;&amp; [ $CP2 -eq 1 ]</span><br><span class="line">        then</span><br><span class="line">            sed -i &#x27;/192.168.18.241/s/;//&#x27; /var/named/baidu.zone</span><br><span class="line">            /etc/init.d/named reload</span><br><span class="line">            CP2=0</span><br><span class="line">     fi</span><br><span class="line">sleep 5</span><br><span class="line">done</span><br></pre></td></tr></table></figure>


<h2 id="十五、shell对输出流的处理"><a href="#十五、shell对输出流的处理" class="headerlink" title="十五、shell对输出流的处理"></a>十五、shell对输出流的处理</h2><ul>
<li>awk介绍</li>
<li>awk基本用法</li>
<li>awk高级用法</li>
<li>awk小技巧</li>
</ul>
<hr>
<p>在日常计算机管理中，总会有很多数据输出到屏幕或者文件，这些输出包含了标准输出、标准错误输出。默认情况下，这些信息全部输出到默认输出设备—-屏幕。然而，大量的数据输出中，只有一小部分是我们需要重点关注的，我们需要把我们需要的或者关注的这些信息过滤或者提取以备后续需要时调用。早先的学习中，我们学过使用grep来过滤这些数据，使用cut、tr命令提出某些字段，但是他们都不具备提取并处理数据的能力，都必须先过滤，再提取转存到变量，然后在通过变量提取去处理，比如：</p>
<p>内存使用率的统计步骤：</p>
<ol>
<li>通过free -m提取出内存总量，赋值给变量 memory_totle</li>
<li>通过free -m提取出n内存使用量，赋值给变量memory_use</li>
<li>通过数学运算计算内存使用率</li>
</ol>
<p>需要执行多步才能得到内存使用率，那么有没有一个命令能够集过滤、提取、运算为一体呢？当然，就是今天我要给大家介绍的命令：awk</p>
<p>平行命令还有gawk、pgawk、dgawk</p>
<h3 id="1-awk介绍"><a href="#1-awk介绍" class="headerlink" title="1. awk介绍"></a>1. awk介绍</h3><p>awk是一种可以处理数据、产生格式化报表的语言，功能十分强大。awk 认为文件中的每一行是一条记录 记录与记录的分隔符为换行符,每一列是一个字段 字段与字段的分隔符默认是一个或多个空格或tab制表符.</p>
<p>awk的工作方式是读取数据，将每一行数据视为一条记录（record）每条记录以字段分隔符分成若干字段，然后输出各个字段的值.</p>
<p>awk语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk [options] [BEGIN]&#123;program&#125; [END][file]</span><br></pre></td></tr></table></figure>
<p>常用命令选项</p>
<table>
<thead>
<tr>
<th align="center">选项</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-F fs</td>
<td>指定描绘一行中数据字段的文件分隔符  默认为空格</td>
</tr>
<tr>
<td align="center">-f file</td>
<td>指定读取程序的文件名</td>
</tr>
<tr>
<td align="center">-v var=value</td>
<td>定义awk程序中使用的变量和默认值</td>
</tr>
</tbody></table>
<p><strong>注意：</strong>awk 程序脚本由左大括号和右大括号定义。脚本命令必须放置在两个大括号之间。由于awk命令行假定脚本是单文本字符串，所以必须将脚本包括在单引号内。</p>
<p>awk程序运行优先级是:</p>
<ol>
<li>BEGIN: 在开始处理数据流之前执行，可选项</li>
<li>program: 如何处理数据流，必选项</li>
<li>END: 处理完数据流后执行，可选项</li>
</ol>
<h3 id="2-awk的基本用法—-awk数据提取功能"><a href="#2-awk的基本用法—-awk数据提取功能" class="headerlink" title="2. awk的基本用法—-awk数据提取功能"></a>2. awk的基本用法—-awk数据提取功能</h3><h4 id="2-1-awk对字段-列-的提取"><a href="#2-1-awk对字段-列-的提取" class="headerlink" title="2.1 awk对字段(列)的提取"></a>2.1 awk对字段(列)的提取</h4><p>字段提取:提取一个文本中的一列数据并打印输出</p>
<p>字段相关内置变量</p>
<table>
<thead>
<tr>
<th align="center">变量</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$0</td>
<td>表示整行文本</td>
</tr>
<tr>
<td align="center">$1</td>
<td>表示文本行中的第一个数据字段</td>
</tr>
<tr>
<td align="center">$2</td>
<td>表示文本行中的第二个数据字段</td>
</tr>
<tr>
<td align="center">$N</td>
<td>表示文本行中的第N个数据字段</td>
</tr>
<tr>
<td align="center">$NF</td>
<td>表示文本行中的最后一个数据字段</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">读入<span class="built_in">test</span>每行数据并把每行数据打印出来</span></span><br><span class="line">awk &#x27;&#123;print $0&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印<span class="built_in">test</span>第六个字段</span></span><br><span class="line">awk &#x27;&#123;print $6&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印<span class="built_in">test</span>最后一个字段</span></span><br><span class="line">awk &#x27;&#123;print $NF&#125;&#x27; test</span><br></pre></td></tr></table></figure>
<h4 id="2-2命令选项详解"><a href="#2-2命令选项详解" class="headerlink" title="2.2命令选项详解"></a>2.2命令选项详解</h4><p>-F: 指定字段与字段的分隔符</p>
<p>当输出的数据流字段格式不是awk默认的字段格式时，我们可以使用-F命令选项来重新定义数据流字段分隔符。比如：处理的文件是/etc/passwd，希望打印第一列、第三列、最后一列</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print $1,$3,$NF&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>
<p>​    <strong>可以看的出，awk输出字段默认的分隔符也是空格</strong></p>
<p>-f file: 如果awk命令是日常重复工作，而又没有太多变化，可以将程序写入文件，每次使用-f调用程序文件就好，方便，高效。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -f abc test  #abc是文件名</span><br></pre></td></tr></table></figure>
<p>-v 定义变量，既然作者写awk的时候就是按着语言去写的，那么语言中最重要的要素—-变量肯定不能缺席，所以可以使用-v命令选项定义变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">定义一个变量 name=baism，然后调用变量读出数据</span></span><br><span class="line">awk -v name=&#x27;baism&#x27; &#x27;BEGIN&#123;print name&#125;&#x27;		</span><br></pre></td></tr></table></figure>
<h4 id="2-3-awk对记录-行-的提取"><a href="#2-3-awk对记录-行-的提取" class="headerlink" title="2.3 awk对记录(行)的提取"></a>2.3 awk对记录(行)的提取</h4><p>记录提取：提取一个文本中的一行并打印输出</p>
<p>记录的提取方法有两种：a、通过行号 b、通过正则匹配</p>
<p>记录相关内置变量</p>
<p>NR: 指定行号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">提取<span class="built_in">test</span>第三行数据</span></span><br><span class="line">awk &#x27;NR==3&#123;print $0&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">指定行的第一个字段精确匹配字符串为3</span></span><br><span class="line">awk &#x27;$1==&quot;3&quot;&#123;print $0&#125;&#x27; test</span><br></pre></td></tr></table></figure>
<h4 id="2-4-awk对字符串提取"><a href="#2-4-awk对字符串提取" class="headerlink" title="2.4 awk对字符串提取"></a>2.4 awk对字符串提取</h4><p>记录和字段的汇合点就是字符串</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印<span class="built_in">test</span>第三行的第六个字段</span></span><br><span class="line">awk &#x27;NR==3&#123;print $6&#125;&#x27; test</span><br></pre></td></tr></table></figure>
<h4 id="2-5-awk程序的优先级"><a href="#2-5-awk程序的优先级" class="headerlink" title="2.5 awk程序的优先级"></a>2.5 awk程序的优先级</h4><p>关于awk程序的执行优先级，BEGIN是优先级最高的代码块，是在执行PROGRAM之前执行的，不需要提供数据源，因为不涉及到任何数据的处理，也不依赖与PROGRAM代码块；PROGRAM是对数据流干什么，是必选代码块，也是默认代码块。所以在执行时必须提供数据源；END是处理完数据流后的操作，如果需要执行END代码块，就必须需要PROGRAM的支持，单个无法执行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;print &quot;hello ayitula&quot;&#125;&#123;print $0&#125;END&#123;print &quot;bye ayitula&quot;&#125;&#x27; test</span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;hello world&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure>


<h3 id="3-awk高级用法"><a href="#3-awk高级用法" class="headerlink" title="3. awk高级用法"></a>3. awk高级用法</h3><p>awk是一门语言，那么就会符合语言的特性，除了可以定义变量外，还可以定义数组，还可以进行运算，流程控制，我们接下来看看吧。</p>
<h4 id="3-1-awk定义数组"><a href="#3-1-awk定义数组" class="headerlink" title="3.1 awk定义数组"></a>3.1 awk定义数组</h4><p>数组定义方式: 数组名[索引]=值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">定义数组array，有两个元素，分别是100，200，打印数组元素</span></span><br><span class="line">awk &#x27;BEGIN&#123;array[0]=100;array[1]=200;print array[0],array[1]&#125;&#x27;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-awk运算"><a href="#3-2-awk运算" class="headerlink" title="3.2 awk运算"></a>3.2 awk运算</h4><table>
<thead>
<tr>
<th align="center">运算类型</th>
<th>运算符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">赋值运算</td>
<td>=</td>
</tr>
<tr>
<td align="center">比较运算</td>
<td>&gt;   &gt;=   ==   &lt;   &lt;=   !=</td>
</tr>
<tr>
<td align="center">数学运算</td>
<td>+   -   *  /   %   **   ++   —</td>
</tr>
<tr>
<td align="center">逻辑运算</td>
<td>&amp;&amp;  ||</td>
</tr>
<tr>
<td align="center">匹配运算</td>
<td>~   !~</td>
</tr>
</tbody></table>
<ol>
<li>赋值运算：主要是对变量或者数组赋值</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -v name=&#x27;baism&#x27; &#x27;BEGIN&#123;print name&#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;school=&quot;ayitula&quot;;print school&#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN&#123;array[0]=100;print array[0]&#125;&#x27;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>比较运算，如果比较的是字符串则按ascii编码顺序表比较。如果结果返回为真则用1表示，如果返回为假则用0表示</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;print &quot;a&quot; &gt;= &quot;b&quot; &#125;&#x27;		#0</span><br><span class="line">awk &#x27;BEGIN&#123;print &quot;a&quot; &lt;= &quot;b&quot; &#125;&#x27;		#1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">输出<span class="built_in">test</span>文件中第一个字段大于4的那一行</span></span><br><span class="line">awk &#x27;$1&gt;4&#123;print $0&#125;&#x27; test  </span><br><span class="line"></span><br><span class="line">awk &#x27;BEGIN&#123;print 100 &gt;= 1 &#125;&#x27;		#1</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>数学运算</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;print 100+3 &#125;&#x27;		#103</span><br><span class="line">awk &#x27;BEGIN&#123;print 10**3 &#125;&#x27;		#1000</span><br><span class="line">awk -v &#x27;count=0&#x27; &#x27;BEGIN&#123;count++;print count&#125;&#x27;		#1</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>逻辑运算</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;print 100&gt;=2 &amp;&amp; 100&gt;=3 &#125;&#x27;		#1</span><br><span class="line">awk &#x27;BEGIN&#123;print 100&gt;=2 || 1&gt;=100 &#125;&#x27;		#1</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>匹配运算</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">匹配/etc/passwd文件中，第一个字段是ro开头的那一行</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;$1 ~ &quot;^ro&quot; &#123;print $0&#125;&#x27; /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">匹配/etc/passwd文件中，第一个字段不是ro开头的那一行</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;$1 !~ &quot;^ro&quot; &#123;print $0&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>
<h4 id="3-3-awk-环境变量"><a href="#3-3-awk-环境变量" class="headerlink" title="3.3 awk 环境变量"></a>3.3 awk 环境变量</h4><table>
<thead>
<tr>
<th align="center"><strong>变量</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">FIELDWIDTHS</td>
<td>以空格分隔的数字列表，用空格定义每个数据字段的精确宽度</td>
</tr>
<tr>
<td align="center">FS</td>
<td>输入字段分隔符号</td>
</tr>
<tr>
<td align="center">OFS</td>
<td>输出字段分隔符号</td>
</tr>
<tr>
<td align="center">RS</td>
<td>输入记录分隔符</td>
</tr>
<tr>
<td align="center">ORS</td>
<td>输出记录分隔符号</td>
</tr>
</tbody></table>
<ol>
<li>FIELDWIDTHS:重定义列宽并打印，注意不可以使用$0打印所有，因为$0是打印本行全内容，不会打印你定义的字段</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">输出/etc/passwd文件第一行中的第1，2，3列，并且第一列是5个字符，第二列2个字符，第三列8个字符</span></span><br><span class="line">awk &#x27;BEGIN&#123;FIELDWIDTHS=&quot;5 2 8&quot;&#125;NR==1&#123;print $1,$2,$3&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>FS:指定数据源中字段分隔符，类似命令选项-F</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">指定数据源字段的分隔符为<span class="string">&#x27;:&#x27;</span></span></span><br><span class="line">awk &#x27;BEGIN&#123;FS=&quot;:&quot;&#125;NR==1&#123;print $1,$3,$NF&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>OFS:指定输出到屏幕后字段的分隔符</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">指定数据源字段的分隔符为<span class="string">&#x27;:&#x27;</span>，并指定输出字段的分隔符为<span class="string">&#x27;-&#x27;</span></span></span><br><span class="line">awk &#x27;BEGIN&#123;FS=&quot;:&quot;;OFS=&quot;-&quot;&#125;NR==1&#123;print $1,$3,$NF&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>RS:指定输入记录（行）的分隔符，默认是回车</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">把输入所有记录（行）的分隔符都设置为空</span></span><br><span class="line">awk &#x27;BEGIN&#123;RS=&quot;&quot;&#125;&#123;print $1,$13,$25,$37,$49&#125;&#x27; test</span><br></pre></td></tr></table></figure>
<p><strong>将记录的分隔符修改为空行后，所有的行会变成一行，所以所有字段就在一行了。</strong></p>
<ol start="5">
<li>ORS:输出到屏幕后记录（行）的分隔符，默认为回车</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">把输入所有记录（行）的分隔符都设置为空，输出记录（行）的分隔符设置为*</span></span><br><span class="line">awk &#x27;BEGIN&#123;RS=&quot;&quot;;ORS=&quot;*&quot;&#125;&#123;print $1,$13,$25,$37,$49&#125;&#x27; test</span><br></pre></td></tr></table></figure>
<h4 id="3-4流程控制"><a href="#3-4流程控制" class="headerlink" title="3.4流程控制"></a>3.4流程控制</h4><ol>
<li>if判断语句</li>
<li>for循环语句</li>
<li>while循环语句</li>
<li>do…while语句</li>
<li>循环控制</li>
</ol>
<p>if判断语句</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印<span class="variable">$1</span>大于5的行</span></span><br><span class="line">awk &#x27;&#123;if($1&gt;5)print $0&#125;&#x27; num</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">假如<span class="variable">$1</span>大于5则除以2输出，否则乘以2输出</span></span><br><span class="line">awk &#x27;&#123;if($1&gt;5)print $1/2;else print $1*2&#125;&#x27; num</span><br></pre></td></tr></table></figure>
<p>for循环语句</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将一行中的数据都加起来  <span class="variable">$1</span>+<span class="variable">$2</span>+<span class="variable">$3</span></span></span><br><span class="line">awk &#x27;&#123;sum=0;for (i=1;i&lt;4;i++)&#123;sum+=$i&#125;print sum&#125;&#x27; num2</span><br></pre></td></tr></table></figure>
<p>while循环语句</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将文件中的每行的数值累加，和大于或等于150就停止累加</span></span><br><span class="line">awk &#x27;&#123;sum=0;i=1;while(sum&lt;150)&#123;sum+=$i;i++&#125;print sum&#125;&#x27; num2</span><br></pre></td></tr></table></figure>
<p>do…while循环语句</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;sum=0;i=1;do&#123;sum+=$i;i++&#125;while(sum&lt;150);print sum&#125;&#x27; num2</span><br></pre></td></tr></table></figure>
<p>循环控制语句</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">累加每行数值，和大于150停止累加</span></span><br><span class="line">awk &#x27;&#123;sum=0;i=1;while(i&lt;4)&#123;sum+=$i;if (sum&gt;150)&#123;break&#125;;i++;&#125;;print sum&#125;&#x27; num2</span><br></pre></td></tr></table></figure>


<h3 id="4-awk小技巧"><a href="#4-awk小技巧" class="headerlink" title="4. awk小技巧"></a>4. awk小技巧</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印<span class="built_in">test</span>文本的行数</span> </span><br><span class="line">awk &#x27;END&#123;print NR&#125;&#x27; test</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印<span class="built_in">test</span>文本最后一行内容</span></span><br><span class="line">awk &#x27;END&#123;print $0&#125;&#x27; test </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印<span class="built_in">test</span>文本列数</span></span><br><span class="line">awk &#x27;END&#123;print NF&#125;&#x27; test </span><br></pre></td></tr></table></figure>


<h3 id="5-实战"><a href="#5-实战" class="headerlink" title="5.实战"></a>5.实战</h3><p>练习一</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cat contacts </span><br><span class="line">Riley Mullen</span><br><span class="line">123 Main Street</span><br><span class="line">Chicago,IL 60602</span><br><span class="line">(312)555-1234</span><br><span class="line">Riley Mullen</span><br><span class="line">123 Main Street</span><br><span class="line">Chicago,IL 60602</span><br><span class="line">(312)555-1234</span><br><span class="line">Riley Mullen</span><br><span class="line">123 Main Street</span><br><span class="line">Chicago,IL 60602</span><br><span class="line">(312)555-1234</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">期望输出</span></span><br><span class="line">Riley Mullen (312)555-1234</span><br><span class="line">Riley Mullen (312)555-1234</span><br><span class="line">Riley Mullen (312)555-1234</span><br><span class="line"></span><br><span class="line">[root@www ~]# awk &#x27;BEGIN&#123;RS=&quot;&quot;;FS=&quot;\n&quot;&#125;&#123;print $1,$4&#125;&#x27; contacts </span><br><span class="line">Riley Mullen (312)555-1234</span><br><span class="line">Riley Mullen (312)555-1234</span><br><span class="line">Riley Mullen (312)555-1234</span><br></pre></td></tr></table></figure>
<p>练习二</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cat ip</span><br><span class="line">192.168.1</span><br><span class="line">192.168.2</span><br><span class="line">192.168.3</span><br><span class="line">172.16.3</span><br><span class="line">192.16.1</span><br><span class="line">192.16.2</span><br><span class="line">192.16.3</span><br><span class="line">10.0.4</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">期望输出</span></span><br><span class="line">192.168.1-192.168.3</span><br><span class="line">172.16.3</span><br><span class="line">192.16.3-192.16.1</span><br><span class="line">10.0.4</span><br><span class="line"></span><br><span class="line">[root@www ~]# awk &#x27;BEGIN&#123;RS=&quot;&quot;;OFS=&quot;\n&quot;&#125;&#123;print $1 &quot;-&quot; $3,$4,$7 &quot;-&quot; $4,$8&#125;&#x27; ip</span><br><span class="line">192.168.1-192.168.3</span><br><span class="line">172.16.3</span><br><span class="line">192.16.3-172.16.3</span><br><span class="line">10.0.4</span><br></pre></td></tr></table></figure>
<p>练习三</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# cat num</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">期望求出<span class="variable">$1</span>字段的和</span></span><br><span class="line">[root@www ~]# awk &#x27;&#123;sum+=$1&#125;END&#123;print sum&#125;&#x27; num</span><br><span class="line">45</span><br></pre></td></tr></table></figure>
<p>练习四</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">统计当前所有连接状态的数量</span></span><br><span class="line">[root@www ~]# netstat -antpl|awk &#x27;&#123;array[$6]+=1&#125;END&#123;for (i in array)print array[i],i&#125;&#x27;</span><br><span class="line">5 LISTEN</span><br><span class="line">1 established)</span><br><span class="line">1 Foreign</span><br></pre></td></tr></table></figure>
<p>练习五</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">用awk命令     获取100以内能被7整除，而且包含7的数字</span></span><br><span class="line">awk &#x27;BEGIN&#123;for (i=1;i&lt;101;i++) &#123;if (i%7==0 &amp;&amp; i ~ &quot;7&quot;) &#123;print i&#125;&#125;&#125;&#x27;</span><br></pre></td></tr></table></figure>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：Shell脚本</li>
        <li>Post author：John_Frod</li>
        <li>Create time：2021-01-29 22:01:18</li>
        <li>
            Post link：https://keep.xpoet.cn/2021/01/29/Shell脚本/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/02/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"
                        >
                            <span class="left arrow-icon flex-center" >
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">数据库基础</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/01/25/PHP%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">PHP面向对象基础</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center" >
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                    
                </main>

            </div>

            <div class="page-main-content-bottom">
                <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span> -
            
            2021 <i class="fas fa-heart icon-animate"></i> <a href="/">John_Frod</a>
        </div>
        
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count <span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a> | Theme <a class="theme-version" target="_blank"></a>
        </div>
    </div>
</footer>

            </div>
        </div>
    </main>

    <div class="sidebar-tools">
        <div class="tools-container">
    <ul class="tools-list">
        
            <li class="search popup-trigger">
                <i class="fas fa-search"></i>
            </li>
        

        

        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

    </ul>
</div>

    </div>

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">

    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-top flex-center">
            <i class="fas fa-arrow-up"></i>
        </li>

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="tools-ul-1">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

    </ul>
</div>

    </div>

    <!-- page aside -->
    <aside class="page-aside">
        
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81shell%E4%BB%8B%E7%BB%8D"><span class="nav-text">一、shell介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFshell"><span class="nav-text">1.什么是shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-shell%E5%8A%9F%E8%83%BD"><span class="nav-text">2. shell功能</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81shell%E8%AF%AD%E6%B3%95"><span class="nav-text">二、shell语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%A6%82%E4%BD%95%E4%B9%A6%E5%86%99%E4%B8%80%E4%B8%AAshell%E8%84%9A%E6%9C%AC"><span class="nav-text">1.如何书写一个shell脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%A6%82%E4%BD%95%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AAshell%E8%84%9A%E6%9C%AC"><span class="nav-text">2.如何运行一个shell脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-shell%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7"><span class="nav-text">3. shell中的特殊符号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-shell%E4%B8%AD%E7%AE%A1%E9%81%93%E7%9A%84%E8%BF%90%E7%94%A8"><span class="nav-text">4. shell中管道的运用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-shell%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-text">5. shell重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-shell%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97"><span class="nav-text">6. shell数学运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E9%80%80%E5%87%BA%E8%84%9A%E6%9C%AC"><span class="nav-text">7.退出脚本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81shell%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="nav-text">三、shell格式化输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-echo%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D"><span class="nav-text">1. echo命令介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%A2%9C%E8%89%B2%E4%BB%A3%E7%A0%81"><span class="nav-text">2.颜色代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81shell%E5%9F%BA%E6%9C%AC%E8%BE%93%E5%85%A5"><span class="nav-text">四、shell基本输入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-read%E5%91%BD%E4%BB%A4"><span class="nav-text">1. read命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81shell%E5%8F%98%E9%87%8F"><span class="nav-text">五、shell变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%8F%98%E9%87%8F%E4%BB%8B%E7%BB%8D"><span class="nav-text">1.变量介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%8F%98%E9%87%8F%E5%88%86%E7%B1%BB"><span class="nav-text">2.变量分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-text">3.定义变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-text">3.1定义变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2%E8%AF%BB%E5%8F%96%E5%8F%98%E9%87%8F%E5%86%85%E5%AE%B9"><span class="nav-text">3.2读取变量内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3%E5%8F%96%E6%B6%88%E5%8F%98%E9%87%8Funset"><span class="nav-text">3.3取消变量unset</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8Fexport"><span class="nav-text">3.4定义全局变量export</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5%E5%AE%9A%E4%B9%89%E6%B0%B8%E4%B9%85%E5%8F%98%E9%87%8F"><span class="nav-text">3.5定义永久变量</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81shell%E6%95%B0%E7%BB%84"><span class="nav-text">六、shell数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%95%B0%E7%BB%84%E4%BB%8B%E7%BB%8D"><span class="nav-text">1.数组介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9F%BA%E6%9C%AC%E6%95%B0%E7%BB%84"><span class="nav-text">2.基本数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1%E6%95%B0%E7%BB%84%E8%AF%AD%E6%B3%95"><span class="nav-text">2.1数组语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2%E6%95%B0%E7%BB%84%E8%AF%BB%E5%87%BA"><span class="nav-text">2.2数组读出</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3%E6%95%B0%E7%BB%84%E8%B5%8B%E5%80%BC"><span class="nav-text">2.3数组赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4%E6%9F%A5%E7%9C%8B%E6%95%B0%E7%BB%84"><span class="nav-text">2.4查看数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5%E8%AE%BF%E9%97%AE%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0"><span class="nav-text">2.5访问数组元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84"><span class="nav-text">2.6遍历数组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%85%B3%E8%81%94%E6%95%B0%E7%BB%84"><span class="nav-text">3.关联数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1%E5%AE%9A%E4%B9%89%E5%85%B3%E8%81%94%E6%95%B0%E7%BB%84"><span class="nav-text">3.1定义关联数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2%E5%85%B3%E8%81%94%E6%95%B0%E7%BB%84%E8%B5%8B%E5%80%BC"><span class="nav-text">3.2关联数组赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3%E6%9F%A5%E7%9C%8B%E6%95%B0%E7%BB%84"><span class="nav-text">3.3查看数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4%E8%AE%BF%E9%97%AE%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0"><span class="nav-text">3.4访问数组元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84"><span class="nav-text">3.5遍历数组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%A1%88%E4%BE%8B%E5%88%86%E4%BA%AB%E2%80%94%E2%80%94%E5%AD%A6%E5%91%98%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F"><span class="nav-text">4.案例分享——学员信息系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-if%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5"><span class="nav-text">七、shell流程控制-if判断语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-shell%E4%B8%AD%E7%9A%84%E8%BF%90%E7%AE%97"><span class="nav-text">1. shell中的运算</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1%E6%95%B0%E5%AD%A6%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97"><span class="nav-text">1.1数学比较运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97"><span class="nav-text">1.2字符串比较运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3%E6%96%87%E4%BB%B6%E6%AF%94%E8%BE%83%E4%B8%8E%E6%A3%80%E6%9F%A5"><span class="nav-text">1.3文件比较与检查</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="nav-text">1.4逻辑运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97"><span class="nav-text">1.5赋值运算</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-if%E8%AF%AD%E6%B3%95"><span class="nav-text">2. if语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1%E8%AF%AD%E6%B3%95%E4%B8%80%EF%BC%9A%E5%8D%95if%E8%AF%AD%E5%8F%A5"><span class="nav-text">2.1语法一：单if语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2%E8%AF%AD%E6%B3%95%E4%BA%8C%EF%BC%9Aif-then-else%E8%AF%AD%E5%8F%A5"><span class="nav-text">2.2语法二：if-then-else语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3%E8%AF%AD%E6%B3%95%E4%B8%89%EF%BC%9Aif-then-elif%E8%AF%AD%E5%8F%A5"><span class="nav-text">2.3语法三：if-then-elif语句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-if%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8"><span class="nav-text">3. if高级应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-for%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-text">八、shell流程控制-for循环语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-for-%E5%BE%AA%E7%8E%AF%E4%BB%8B%E7%BB%8D"><span class="nav-text">1. for 循环介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-for%E8%AF%AD%E6%B3%95"><span class="nav-text">2. for语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-for-%E8%AF%AD%E6%B3%95%E4%B8%80"><span class="nav-text">2.1 for 语法一</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-for%E8%AF%AD%E6%B3%95%E4%BA%8C"><span class="nav-text">2.2 for语法二</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="nav-text">3.循环控制语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-sleep-N-%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E5%88%B0%E8%AF%A5%E6%AD%A5%E4%BC%91%E7%9C%A0N%E7%A7%92"><span class="nav-text">3.1 sleep N 脚本执行到该步休眠N秒</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-continue-%E8%B7%B3%E8%BF%87%E5%BE%AA%E7%8E%AF%E4%B8%AD%E7%9A%84%E6%9F%90%E6%AC%A1%E5%BE%AA%E7%8E%AF"><span class="nav-text">3.2 continue 跳过循环中的某次循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-break-%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C%E5%90%8E%E7%BB%AD%E4%BB%A3%E7%A0%81"><span class="nav-text">3.3 break 跳出循环继续执行后续代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4%E5%AE%9E%E4%BE%8B"><span class="nav-text">3.4实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-while%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-text">九、shell流程控制-while循环语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-while%E5%BE%AA%E7%8E%AF%E4%BB%8B%E7%BB%8D"><span class="nav-text">1. while循环介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-while%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95"><span class="nav-text">2.while循环语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-while%E5%AE%9E%E6%88%98"><span class="nav-text">3. while实战</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-until%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-text">十、shell流程控制-until循环语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-until%E4%BB%8B%E7%BB%8D"><span class="nav-text">1. until介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-until%E8%AF%AD%E6%B3%95"><span class="nav-text">2. until语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%A1%88%E4%BE%8B"><span class="nav-text">3.案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81shell%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-case%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5"><span class="nav-text">十一、shell流程控制-case条件判断语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-case%E4%BB%8B%E7%BB%8D"><span class="nav-text">1. case介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-case%E8%AF%AD%E6%B3%95"><span class="nav-text">2. case语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-shell%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="nav-text">3. shell特殊变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81shell%E5%87%BD%E6%95%B0"><span class="nav-text">十二、shell函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D"><span class="nav-text">1.函数介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="nav-text">2.函数的语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-text">3.函数的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0"><span class="nav-text">3.1定义一个函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8"><span class="nav-text">3.2函数应用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AE%9E%E6%88%98"><span class="nav-text">4.实战</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">十三、正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BB%8B%E7%BB%8D"><span class="nav-text">1.正则表达式介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="nav-text">2.特殊字符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-POSIX%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="nav-text">3. POSIX特殊字符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81shell%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">十四、shell对文件的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="nav-text">1.简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-sed%E5%91%BD%E4%BB%A4"><span class="nav-text">2.sed命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-sed%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%8E%9F%E7%90%86"><span class="nav-text">2.1 sed数据处理原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-sed%E5%91%BD%E4%BB%A4"><span class="nav-text">2.2 sed命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-1-sed%E5%86%85%E9%83%A8%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E"><span class="nav-text">2.2.1 sed内部命令说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-2%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E8%AF%B4%E6%98%8E"><span class="nav-text">2.2.2命令选项说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-3%E6%A0%87%E5%BF%97"><span class="nav-text">2.2.3标志</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-sed%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="nav-text">3. sed小技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AE%9E%E6%88%98-1"><span class="nav-text">4.实战</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%94%E3%80%81shell%E5%AF%B9%E8%BE%93%E5%87%BA%E6%B5%81%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-text">十五、shell对输出流的处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-awk%E4%BB%8B%E7%BB%8D"><span class="nav-text">1. awk介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-awk%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%E2%80%94-awk%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96%E5%8A%9F%E8%83%BD"><span class="nav-text">2. awk的基本用法—-awk数据提取功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-awk%E5%AF%B9%E5%AD%97%E6%AE%B5-%E5%88%97-%E7%9A%84%E6%8F%90%E5%8F%96"><span class="nav-text">2.1 awk对字段(列)的提取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E8%AF%A6%E8%A7%A3"><span class="nav-text">2.2命令选项详解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-awk%E5%AF%B9%E8%AE%B0%E5%BD%95-%E8%A1%8C-%E7%9A%84%E6%8F%90%E5%8F%96"><span class="nav-text">2.3 awk对记录(行)的提取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-awk%E5%AF%B9%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8F%90%E5%8F%96"><span class="nav-text">2.4 awk对字符串提取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-awk%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-text">2.5 awk程序的优先级</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-awk%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="nav-text">3. awk高级用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-awk%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84"><span class="nav-text">3.1 awk定义数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-awk%E8%BF%90%E7%AE%97"><span class="nav-text">3.2 awk运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-awk-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-text">3.3 awk 环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-text">3.4流程控制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-awk%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="nav-text">4. awk小技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%AE%9E%E6%88%98"><span class="nav-text">5.实战</span></a></li></ol></li></ol>
    </div>
</div>
        
    </aside>

    <!-- image viewer -->
    <div class="image-viewer-container">
    <div class="img-box">
        <img src="">
    </div>
</div>


</div>



    <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-icon">
            <i class="fas fa-search"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/local-search.js"></script>




    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/left-side-toggle.js"></script>

    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/code-copy.js"></script>
    

    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/toc.js"></script>
    


</body>
</html>